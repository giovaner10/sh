<?php
$lang=array();
$lang['retorno_cod_00'] = "Este código indica que o pagamento foi confirmado";
$lang['retorno_cod_01'] = "Insuficiência de Fundos - Débito Não Efetuado";
$lang['retorno_cod_02'] = "Crédito ou Débito Cancelado pelo Pagador/Credor";
$lang['retorno_cod_03'] = "Débito Autorizado pela Agência - Efetuado";
$lang['retorno_cod_AA'] = "Controle Inválido";
$lang['retorno_cod_AB'] = "Tipo de Operação Inválido";
$lang['retorno_cod_AC'] = "Tipo de Serviço Inválido";
$lang['retorno_cod_AD'] = "Forma de Lançamento Inválida";
$lang['retorno_cod_AE'] = "Tipo/Número de Inscrição Inválido";
$lang['retorno_cod_AF'] = "Código de Convênio Inválido";
$lang['retorno_cod_AG'] = "Agência/Conta Corrente/DV Inválido";
$lang['retorno_cod_AH'] = "Nº Seqüencial do Registro no Lote Inválido";
$lang['retorno_cod_AI'] = "Código de Segmento de Detalhe Inválido";
$lang['retorno_cod_AJ'] = "Tipo de Movimento Inválido";
$lang['retorno_cod_AK'] = "Código da Câmara de Compensação do Banco Favorecido/Depositário Inválido";
$lang['retorno_cod_AL'] = "Código do Banco Favorecido ou Depositário Inválido";
$lang['retorno_cod_AM'] = "Agência Mantenedora da Conta Corrente do Favorecido Inválida";
$lang['retorno_cod_AN'] = "Conta Corrente/DV do Favorecido Inválido";
$lang['retorno_cod_AO'] = "Nome do Favorecido Não Informado";
$lang['retorno_cod_AP'] = "Data Lançamento Inválido";
$lang['retorno_cod_AQ'] = "Tipo/Quantidade da Moeda Inválido";
$lang['retorno_cod_AR'] = "Valor do Lançamento Inválido";
$lang['retorno_cod_AS'] = "Aviso ao Favorecido - Identificação Inválida";
$lang['retorno_cod_AT'] = "Tipo/Número de Inscrição do Favorecido Inválido";
$lang['retorno_cod_AU'] = "Logradouro do Favorecido Não Informado";
$lang['retorno_cod_AV'] = "Nº do Local do Favorecido Não Informado";
$lang['retorno_cod_AW'] = "Cidade do Favorecido Não Informada";
$lang['retorno_cod_AX'] = "CEP/Complemento do Favorecido Inválido";
$lang['retorno_cod_AY'] = "Sigla do Estado do Favorecido Inválida";
$lang['retorno_cod_AZ'] = "Código/Nome do Banco Depositário Inválido";
$lang['retorno_cod_BA'] = "Código/Nome da Agência Depositária Não Informado";
$lang['retorno_cod_BB'] = "Seu Número Inválido";
$lang['retorno_cod_BC'] = "Nosso Número Inválido";
$lang['retorno_cod_BD'] = "Inclusão Efetuada com Sucesso";
$lang['retorno_cod_BE'] = "Alteração Efetuada com Sucesso";
$lang['retorno_cod_BF'] = "Exclusão Efetuada com Sucesso";
$lang['retorno_cod_BG'] = "Agência/Conta Impedida Legalmente";
$lang['retorno_cod_BH'] = "Empresa não pagou salário";
$lang['retorno_cod_BI'] = "Falecimento do mutuário";
$lang['retorno_cod_BJ'] = "Empresa não enviou remessa do mutuário";
$lang['retorno_cod_BK'] = "Empresa não enviou remessa no vencimento";
$lang['retorno_cod_BL'] = "Valor da parcela inválida";
$lang['retorno_cod_BM'] = "Identificação do contrato inválida";
$lang['retorno_cod_BN'] = "Operação de Consignação Incluída com Sucesso";
$lang['retorno_cod_BO'] = "Operação de Consignação Alterada com Sucesso";
$lang['retorno_cod_BP'] = "Operação de Consignação Excluída com Sucesso";
$lang['retorno_cod_BQ'] = "Operação de Consignação Liquidada com Sucesso";
$lang['retorno_cod_BR'] = "Reativação Efetuada com Sucesso";
$lang['retorno_cod_BS'] = "Suspensão Efetuada com Sucesso";
$lang['retorno_cod_CA'] = "Código de Barras - Código do Banco Inválido";
$lang['retorno_cod_CB'] = "Código de Barras - Código da Moeda Inválido";
$lang['retorno_cod_CC'] = "Código de Barras - Dígito Verificador Geral Inválido";
$lang['retorno_cod_CD'] = "Código de Barras - Valor do Título Inválido";
$lang['retorno_cod_CE'] = "Código de Barras - Campo Livre Inválido";
$lang['retorno_cod_CF'] = "Valor do Documento Inválido";
$lang['retorno_cod_CG'] = "Valor do Abatimento Inválido";
$lang['retorno_cod_CH'] = "Valor do Desconto Inválido";
$lang['retorno_cod_CI'] = "Valor de Mora Inválido";
$lang['retorno_cod_CJ'] = "Valor da Multa Inválido";
$lang['retorno_cod_CK'] = "Valor do IR Inválido";
$lang['retorno_cod_CL'] = "Valor do ISS Inválido";
$lang['retorno_cod_CM'] = "Valor do IOF Inválido";
$lang['retorno_cod_CN'] = "Valor de Outras Deduções Inválido";
$lang['retorno_cod_CO'] = "Valor de Outros Acréscimos Inválido";
$lang['retorno_cod_CP'] = "Valor do INSS Inválido";
$lang['retorno_cod_HA'] = "Lote Não Aceito";
$lang['retorno_cod_HB'] = "Inscrição da Empresa Inválida para o Contrato";
$lang['retorno_cod_HC'] = "Convênio com a Empresa Inexistente/Inválido para o Contrato";
$lang['retorno_cod_HD'] = "Agência/Conta Corrente da Empresa Inexistente/Inválido para o Contrato";
$lang['retorno_cod_HE'] = "Tipo de Serviço Inválido para o Contrato";
$lang['retorno_cod_HF'] = "Conta Corrente da Empresa com Saldo Insuficiente";
$lang['retorno_cod_HG'] = "Lote de Serviço Fora de Seqüência";
$lang['retorno_cod_HH'] = "Lote de Serviço Inválido";
$lang['retorno_cod_HI'] = "Arquivo não aceito";
$lang['retorno_cod_HJ'] = "Tipo de Registro Inválido";
$lang['retorno_cod_HK'] = "Código Remessa / Retorno Inválido";
$lang['retorno_cod_HL'] = "Versão de layout inválida";
$lang['retorno_cod_HM'] = "Mutuário não identificado";
$lang['retorno_cod_HN'] = "Tipo do beneficio não permite empréstimo";
$lang['retorno_cod_HO'] = "Beneficio cessado/suspenso";
$lang['retorno_cod_HP'] = "Beneficio possui representante legal";
$lang['retorno_cod_HQ'] = "Beneficio é do tipo PA (Pensão alimentícia)";
$lang['retorno_cod_HR'] = "Quantidade de contratos permitida excedida";
$lang['retorno_cod_HS'] = "Beneficio não pertence ao Banco informado";
$lang['retorno_cod_HT'] = "Início do desconto informado já ultrapassado";
$lang['retorno_cod_HU'] = "Número da parcela inválida";
$lang['retorno_cod_HV'] = "Quantidade de parcela inválida";
$lang['retorno_cod_HW'] = "Margem consignável excedida para o mutuário dentro do prazo do contrato";
$lang['retorno_cod_HX'] = "Empréstimo já cadastrado";
$lang['retorno_cod_HY'] = "Empréstimo inexistente";
$lang['retorno_cod_HZ'] = "Empréstimo já encerrado";
$lang['retorno_cod_H1'] = "Arquivo sem trailer";
$lang['retorno_cod_H2'] = "Mutuário sem crédito na competência";
$lang['retorno_cod_H3'] = "Não descontado – outros motivos";
$lang['retorno_cod_H4'] = "Retorno de Crédito não pago";
$lang['retorno_cod_H5'] = "Cancelamento de empréstimo retroativo";
$lang['retorno_cod_H6'] = "Outros Motivos de Glosa";
$lang['retorno_cod_H7'] = "Margem consignável excedida para o mutuário acima do prazo do contrato";
$lang['retorno_cod_H8'] = "Mutuário desligado do empregador";
$lang['retorno_cod_H9'] = "Mutuário afastado por licença";
$lang['retorno_cod_IA'] = "Primeiro nome do mutuário diferente do primeiro nome do movimento do censo ou diferente da base de Titular do Benefício";
$lang['retorno_cod_IB'] = "Benefício suspenso/cessado pela APS ou Sisobi";
$lang['retorno_cod_IC'] = "Benefício suspenso por dependência de cálculo";
$lang['retorno_cod_ID'] = "Benefício suspenso/cessado pela inspetoria/auditoria";
$lang['retorno_cod_IE'] = "Benefício bloqueado para empréstimo pelo beneficiário";
$lang['retorno_cod_IF'] = "Benefício bloqueado para empréstimo por TBM";
$lang['retorno_cod_IG'] = "Benefício está em fase de concessão de PA ou desdobramento";
$lang['retorno_cod_IH'] = "Benefício cessado por óbito";
$lang['retorno_cod_II'] = "Benefício cessado por fraude";
$lang['retorno_cod_IJ'] = "Benefício cessado por concessão de outro benefício";
$lang['retorno_cod_IK'] = "Benefício cessado: estatutário transferido para órgão de origem";
$lang['retorno_cod_IL'] = "Empréstimo suspenso pela APS";
$lang['retorno_cod_IM'] = "Empréstimo cancelado pelo banco";
$lang['retorno_cod_IN'] = "Crédito transformado em PAB";
$lang['retorno_cod_IO'] = "Término da consignação foi alterado";
$lang['retorno_cod_IP'] = "Fim do empréstimo ocorreu durante período de suspensão ou concessão";
$lang['retorno_cod_IQ'] = "Empréstimo suspenso pelo banco";
$lang['retorno_cod_IR'] = "Não averbação de contrato – quantidade de parcelas/competências informadas ultrapassou a data limite da extinção de cota do dependente titular de benefícios";
$lang['retorno_cod_TA'] = "Lote Não Aceito - Totais do Lote com Diferença";
$lang['retorno_cod_YA'] = "Título Não Encontrado";
$lang['retorno_cod_YB'] = "Identificador Registro Opcional Inválido";
$lang['retorno_cod_YC'] = "Código Padrão Inválido";
$lang['retorno_cod_YD'] = "Código de Ocorrência Inválido";
$lang['retorno_cod_YE'] = "Complemento de Ocorrência Inválido";
$lang['retorno_cod_YF'] = "Alegação já Informada";
$lang['retorno_cod_ZA'] = "Agência / Conta do Favorecido Substituída Observação: As ocorrências iniciadas com 'ZA' tem caráter informativo para o cliente";
$lang['retorno_cod_ZB'] = "Divergência entre o primeiro e último nome do beneficiário versus primeiro e último nome na Receita Federal";
$lang['retorno_cod_ZC'] = "Confirmação de Antecipação de Valor";
$lang['retorno_cod_ZD'] = "Antecipação parcial de valor";
$lang['retorno_cod_ZE'] = "Título bloqueado na base";
$lang['retorno_cod_ZF'] = "Sistema em contingência – título valor maior que referência";
$lang['retorno_cod_ZG'] = "Sistema em contingência – título vencido";
$lang['retorno_cod_ZH'] = "Sistema em contingência – título indexado";
$lang['retorno_cod_ZI'] = "Beneficiário divergente";
$lang['retorno_cod_ZJ'] = "Limite de pagamentos parciais excedido";
$lang['retorno_cod_ZK'] = "Boleto já liquidado";
?>
<div class="row-fluid">
		<div class="span6">
			<h3>Faturas Processadas no Retorno</h3>
			<table class="table table-condensed">
				<thead>
					<tr>
						<th>Fatura</th>
						<th>Valor Pago</th>
						<th>Data Pag.</th>
						<th>Arquivo</th>
					</tr>
				</thead>
				<tbody>
				<?php if (isset($content_retorno['retorno']) && count($content_retorno['retorno'] > 0)):?>
					<?php foreach ($content_retorno['retorno'] as $key => $fat_ret):?>
						<tr>
							<td><?php echo $fat_ret->fatnumero_retorno?></td>
							<td>R$ <?php echo number_format($fat_ret->valorpago_retorno, 2, ',', '.') ?></td>
							<td><?php echo data_for_humans($fat_ret->datapagto_retorno) ?></td>
							<td><?php echo $fat_ret->arquivo_retorno?></td>
						</tr>
					<?php endforeach;?>
				<?php endif;?>
				</tbody>
				
			</table>

		</div>
		<div class="span6">
			<h3>Faturas Baixadas no Financeiro</h3>
			<table class="table table-condensed">
				<thead>
					<tr>
						<th>Fatura</th>
						<th>Cliente</th>
						<th>Val. Pago</th>
						<th>Data Pag.</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
				<?php if (isset($content_retorno['financeiro']) && count($content_retorno['financeiro'] > 0)):?>
					<?php foreach ($content_retorno['financeiro'] as $fat_baixada):?>
					<?php echo form_open('faturas/filtro', array('target' => '_blank'), array('filtro' => $fat_baixada->numero))?>
					<tr class="<?php echo isset($fat_baixada->erro) ? 'error' : ''?>">
						<td><?php echo $fat_baixada->numero?></td>
						<td><?php echo isset($fat_baixada->nome) ? $fat_baixada->nome : $fat_baixada->erro?></td>
						<td>R$ <?php echo number_format($fat_baixada->valor_pago, 2, ',', '.'); ?></td>
						<td><?php echo $fat_baixada->data_pagto != '' ? data_for_humans($fat_baixada->data_pagto) : ''?></td>
						<td>
							<?php if(isset($fat_baixada->erro)):?>
							<button type="submit" class="btn btn-primary"><i class="fa fa-search" aria-hidden="true"></i></button>
							<?php endif;?>
						</td>
					</tr>
					<?php echo form_close()?>
					<?php endforeach;?>
				<?php endif;?>
				</tbody>
				
			</table>
		</div>
	</div>
	<div class="row-fluid">
		<div class="span12">
			<h3>Contas Processadas no Retorno</h3>
			<table class="table table-condensed">
				<thead>
					<tr>
						<th>#</th>
						<th>Valor Pago</th>
						<th>Data Pag.</th>
						<th>Arquivo</th>
						<th>Mensagem</th>
						<th>Baixada no contas</th>
					</tr>
				</thead>
				<tbody>
				<?php if (isset($content_retorno_pagamento) && count($content_retorno_pagamento > 0)):?>
					<?php foreach ($content_retorno_pagamento as $key => $fat_ret):?>
						<tr>
							<td><?php echo $fat_ret->contas_numero_retorno?></td>
							<td>R$ <?php echo number_format($fat_ret->valorpago_retorno, 2, ',', '.') ?></td>
							<td><?php echo data_for_humans($fat_ret->datapagto_retorno) ?></td>
							<td><?php echo $fat_ret->arquivo_retorno?></td>
							<td><?php echo $lang['retorno_cod_'.substr($fat_ret->status_pagamento,0,2)];
									if(substr($fat_ret->status_pagamento,2,2)!="  "){
										echo ",".$lang['retorno_cod_'.substr($fat_ret->status_pagamento,2,2)];
									}
									if(substr($fat_ret->status_pagamento,4,2)!="  "){
										echo ",".$lang['retorno_cod_'.substr($fat_ret->status_pagamento,4,2)];
									}
									if(substr($fat_ret->status_pagamento,6,2)!="  "){
										echo ",".$lang['retorno_cod_'.substr($fat_ret->status_pagamento,6,2)];
									}
									if(substr($fat_ret->status_pagamento,8,2)!="  "){
										echo ",".$lang['retorno_cod_'.substr($fat_ret->status_pagamento,8,2)];
									}?></td>
							<td><?php if(substr($fat_ret->status_pagamento,0,2)=="00"){echo "Sim";}else{echo "Não";}?></td>
						</tr>
					<?php endforeach;?>
				<?php endif;?>
				</tbody>
				
			</table>

		</div>
	</div>