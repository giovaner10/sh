{"version":3,"file":"photoswipe-lightbox.esm.js","sources":["../../../src/js/util/util.js","../../../src/js/core/eventable.js","../../../src/js/slide/placeholder.js","../../../src/js/slide/content.js","../../../src/js/util/viewport-size.js","../../../src/js/slide/zoom-level.js","../../../src/js/slide/loader.js","../../../src/js/core/base.js","../../../src/js/lightbox/lightbox.js"],"sourcesContent":["/** @typedef {import('../photoswipe.js').Point} Point */\n\n/**\n * @template {keyof HTMLElementTagNameMap} T\n * @param {string} className\n * @param {T} tagName\n * @param {Node} [appendToEl]\n * @returns {HTMLElementTagNameMap[T]}\n */\nexport function createElement(className, tagName, appendToEl) {\n  const el = document.createElement(tagName);\n  if (className) {\n    el.className = className;\n  }\n  if (appendToEl) {\n    appendToEl.appendChild(el);\n  }\n  return el;\n}\n\n/**\n * @param {Point} p1\n * @param {Point} p2\n * @returns {Point}\n */\nexport function equalizePoints(p1, p2) {\n  p1.x = p2.x;\n  p1.y = p2.y;\n  if (p2.id !== undefined) {\n    p1.id = p2.id;\n  }\n  return p1;\n}\n\n/**\n * @param {Point} p\n */\nexport function roundPoint(p) {\n  p.x = Math.round(p.x);\n  p.y = Math.round(p.y);\n}\n\n/**\n * Returns distance between two points.\n *\n * @param {Point} p1\n * @param {Point} p2\n * @returns {number}\n */\nexport function getDistanceBetween(p1, p2) {\n  const x = Math.abs(p1.x - p2.x);\n  const y = Math.abs(p1.y - p2.y);\n  return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * Whether X and Y positions of points are equal\n *\n * @param {Point} p1\n * @param {Point} p2\n * @returns {boolean}\n */\nexport function pointsEqual(p1, p2) {\n  return p1.x === p2.x && p1.y === p2.y;\n}\n\n/**\n * The float result between the min and max values.\n *\n * @param {number} val\n * @param {number} min\n * @param {number} max\n * @returns {number}\n */\nexport function clamp(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\n/**\n * Get transform string\n *\n * @param {number} x\n * @param {number} [y]\n * @param {number} [scale]\n * @returns {string}\n */\nexport function toTransformString(x, y, scale) {\n  let propValue = `translate3d(${x}px,${y || 0}px,0)`;\n\n  if (scale !== undefined) {\n    propValue += ` scale3d(${scale},${scale},1)`;\n  }\n\n  return propValue;\n}\n\n/**\n * Apply transform:translate(x, y) scale(scale) to element\n *\n * @param {HTMLElement} el\n * @param {number} x\n * @param {number} [y]\n * @param {number} [scale]\n */\nexport function setTransform(el, x, y, scale) {\n  el.style.transform = toTransformString(x, y, scale);\n}\n\nconst defaultCSSEasing = 'cubic-bezier(.4,0,.22,1)';\n\n/**\n * Apply CSS transition to element\n *\n * @param {HTMLElement} el\n * @param {string} [prop] CSS property to animate\n * @param {number} [duration] in ms\n * @param {string} [ease] CSS easing function\n */\nexport function setTransitionStyle(el, prop, duration, ease) {\n  // inOut: 'cubic-bezier(.4, 0, .22, 1)', // for \"toggle state\" transitions\n  // out: 'cubic-bezier(0, 0, .22, 1)', // for \"show\" transitions\n  // in: 'cubic-bezier(.4, 0, 1, 1)'// for \"hide\" transitions\n  el.style.transition = prop\n    ? `${prop} ${duration}ms ${ease || defaultCSSEasing}`\n    : 'none';\n}\n\n/**\n * Apply width and height CSS properties to element\n *\n * @param {HTMLElement} el\n * @param {string | number} w\n * @param {string | number} h\n */\nexport function setWidthHeight(el, w, h) {\n  el.style.width = (typeof w === 'number') ? `${w}px` : w;\n  el.style.height = (typeof h === 'number') ? `${h}px` : h;\n}\n\n/**\n * @param {HTMLElement} el\n */\nexport function removeTransitionStyle(el) {\n  setTransitionStyle(el);\n}\n\n/**\n * @param {HTMLImageElement} img\n * @returns {Promise<HTMLImageElement | void>}\n */\nexport function decodeImage(img) {\n  if ('decode' in img) {\n    return img.decode().catch(() => {});\n  }\n\n  if (img.complete) {\n    return Promise.resolve(img);\n  }\n\n  return new Promise((resolve, reject) => {\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n  });\n}\n\n/** @typedef {LOAD_STATE[keyof LOAD_STATE]} LoadState */\n/** @type {{ IDLE: 'idle'; LOADING: 'loading'; LOADED: 'loaded'; ERROR: 'error' }} */\nexport const LOAD_STATE = {\n  IDLE: 'idle',\n  LOADING: 'loading',\n  LOADED: 'loaded',\n  ERROR: 'error',\n};\n\n\n/**\n * Check if click or keydown event was dispatched\n * with a special key or via mouse wheel.\n *\n * @param {MouseEvent | KeyboardEvent} e\n * @returns {boolean}\n */\nexport function specialKeyUsed(e) {\n  return ('button' in e && e.button === 1) || e.ctrlKey || e.metaKey || e.altKey || e.shiftKey;\n}\n\n/**\n * Parse `gallery` or `children` options.\n *\n * @param {import('../photoswipe.js').ElementProvider} [option]\n * @param {string} [legacySelector]\n * @param {HTMLElement | Document} [parent]\n * @returns HTMLElement[]\n */\nexport function getElementsFromOption(option, legacySelector, parent = document) {\n  /** @type {HTMLElement[]} */\n  let elements = [];\n\n  if (option instanceof Element) {\n    elements = [option];\n  } else if (option instanceof NodeList || Array.isArray(option)) {\n    elements = Array.from(option);\n  } else {\n    const selector = typeof option === 'string' ? option : legacySelector;\n    if (selector) {\n      elements = Array.from(parent.querySelectorAll(selector));\n    }\n  }\n\n  return elements;\n}\n\n/**\n * Check if variable is PhotoSwipe class\n *\n * @param {any} fn\n * @returns {boolean}\n */\nexport function isPswpClass(fn) {\n  return typeof fn === 'function'\n    && fn.prototype\n    && fn.prototype.goTo;\n}\n\n/**\n * Check if browser is Safari\n *\n * @returns {boolean}\n */\nexport function isSafari() {\n  return !!(navigator.vendor && navigator.vendor.match(/apple/i));\n}\n\n","/** @typedef {import('../lightbox/lightbox.js').default} PhotoSwipeLightbox */\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\n/** @typedef {import('../photoswipe.js').DataSource} DataSource */\n/** @typedef {import('../ui/ui-element.js').UIElementData} UIElementData */\n/** @typedef {import('../slide/content.js').default} ContentDefault */\n/** @typedef {import('../slide/slide.js').default} Slide */\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\n/** @typedef {import('../slide/zoom-level.js').default} ZoomLevel */\n/** @typedef {import('../slide/get-thumb-bounds.js').Bounds} Bounds */\n\n/**\n * Allow adding an arbitrary props to the Content\n * https://photoswipe.com/custom-content/#using-webp-image-format\n * @typedef {ContentDefault & Record<string, any>} Content\n */\n/** @typedef {{ x?: number; y?: number }} Point */\n\n/**\n * @typedef {Object} PhotoSwipeEventsMap https://photoswipe.com/events/\n *\n *\n * https://photoswipe.com/adding-ui-elements/\n *\n * @prop {undefined} uiRegister\n * @prop {{ data: UIElementData }} uiElementCreate\n *\n *\n * https://photoswipe.com/events/#initialization-events\n *\n * @prop {undefined} beforeOpen\n * @prop {undefined} firstUpdate\n * @prop {undefined} initialLayout\n * @prop {undefined} change\n * @prop {undefined} afterInit\n * @prop {undefined} bindEvents\n *\n *\n * https://photoswipe.com/events/#opening-or-closing-transition-events\n *\n * @prop {undefined} openingAnimationStart\n * @prop {undefined} openingAnimationEnd\n * @prop {undefined} closingAnimationStart\n * @prop {undefined} closingAnimationEnd\n *\n *\n * https://photoswipe.com/events/#closing-events\n *\n * @prop {undefined} close\n * @prop {undefined} destroy\n *\n *\n * https://photoswipe.com/events/#pointer-and-gesture-events\n *\n * @prop {{ originalEvent: PointerEvent }} pointerDown\n * @prop {{ originalEvent: PointerEvent }} pointerMove\n * @prop {{ originalEvent: PointerEvent }} pointerUp\n * @prop {{ bgOpacity: number }} pinchClose can be default prevented\n * @prop {{ panY: number }} verticalDrag can be default prevented\n *\n *\n * https://photoswipe.com/events/#slide-content-events\n *\n * @prop {{ content: Content }} contentInit\n * @prop {{ content: Content; isLazy: boolean }} contentLoad can be default prevented\n * @prop {{ content: Content; isLazy: boolean }} contentLoadImage can be default prevented\n * @prop {{ content: Content; slide: Slide; isError?: boolean }} loadComplete\n * @prop {{ content: Content; slide: Slide }} loadError\n * @prop {{ content: Content; width: number; height: number }} contentResize can be default prevented\n * @prop {{ content: Content; width: number; height: number; slide: Slide }} imageSizeChange\n * @prop {{ content: Content }} contentLazyLoad can be default prevented\n * @prop {{ content: Content }} contentAppend can be default prevented\n * @prop {{ content: Content }} contentActivate can be default prevented\n * @prop {{ content: Content }} contentDeactivate can be default prevented\n * @prop {{ content: Content }} contentRemove can be default prevented\n * @prop {{ content: Content }} contentDestroy can be default prevented\n *\n *\n * undocumented\n *\n * @prop {{ point: Point; originalEvent: PointerEvent }} imageClickAction can be default prevented\n * @prop {{ point: Point; originalEvent: PointerEvent }} bgClickAction can be default prevented\n * @prop {{ point: Point; originalEvent: PointerEvent }} tapAction can be default prevented\n * @prop {{ point: Point; originalEvent: PointerEvent }} doubleTapAction can be default prevented\n *\n * @prop {{ originalEvent: KeyboardEvent }} keydown can be default prevented\n * @prop {{ x: number; dragging: boolean }} moveMainScroll\n * @prop {{ slide: Slide }} firstZoomPan\n * @prop {{ slide: Slide | undefined, data: SlideData, index: number }} gettingData\n * @prop {undefined} beforeResize\n * @prop {undefined} resize\n * @prop {undefined} viewportSize\n * @prop {undefined} updateScrollOffset\n * @prop {{ slide: Slide }} slideInit\n * @prop {{ slide: Slide }} afterSetContent\n * @prop {{ slide: Slide }} slideLoad\n * @prop {{ slide: Slide }} appendHeavy can be default prevented\n * @prop {{ slide: Slide }} appendHeavyContent\n * @prop {{ slide: Slide }} slideActivate\n * @prop {{ slide: Slide }} slideDeactivate\n * @prop {{ slide: Slide }} slideDestroy\n * @prop {{ destZoomLevel: number, centerPoint: Point | undefined, transitionDuration: number | false | undefined }} beforeZoomTo\n * @prop {{ slide: Slide }} zoomPanUpdate\n * @prop {{ slide: Slide }} initialZoomPan\n * @prop {{ slide: Slide }} calcSlideSize\n * @prop {undefined} resolutionChanged\n * @prop {{ originalEvent: WheelEvent }} wheel can be default prevented\n * @prop {{ content: Content }} contentAppendImage can be default prevented\n * @prop {{ index: number; itemData: SlideData }} lazyLoadSlide can be default prevented\n * @prop {undefined} lazyLoad\n * @prop {{ slide: Slide }} calcBounds\n * @prop {{ zoomLevels: ZoomLevel, slideData: SlideData }} zoomLevelsUpdate\n *\n *\n * legacy\n *\n * @prop {undefined} init\n * @prop {undefined} initialZoomIn\n * @prop {undefined} initialZoomOut\n * @prop {undefined} initialZoomInEnd\n * @prop {undefined} initialZoomOutEnd\n * @prop {{ dataSource: DataSource | undefined, numItems: number }} numItems\n * @prop {{ itemData: SlideData; index: number }} itemData\n * @prop {{ index: number, itemData: SlideData, instance: PhotoSwipe }} thumbBounds\n */\n\n/**\n * @typedef {Object} PhotoSwipeFiltersMap https://photoswipe.com/filters/\n *\n * @prop {(numItems: number, dataSource: DataSource | undefined) => number} numItems\n * Modify the total amount of slides. Example on Data sources page.\n * https://photoswipe.com/filters/#numitems\n *\n * @prop {(itemData: SlideData, index: number) => SlideData} itemData\n * Modify slide item data. Example on Data sources page.\n * https://photoswipe.com/filters/#itemdata\n *\n * @prop {(itemData: SlideData, element: HTMLElement, linkEl: HTMLAnchorElement) => SlideData} domItemData\n * Modify item data when it's parsed from DOM element. Example on Data sources page.\n * https://photoswipe.com/filters/#domitemdata\n *\n * @prop {(clickedIndex: number, e: MouseEvent, instance: PhotoSwipeLightbox) => number} clickedIndex\n * Modify clicked gallery item index.\n * https://photoswipe.com/filters/#clickedindex\n *\n * @prop {(placeholderSrc: string | false, content: Content) => string | false} placeholderSrc\n * Modify placeholder image source.\n * https://photoswipe.com/filters/#placeholdersrc\n *\n * @prop {(isContentLoading: boolean, content: Content) => boolean} isContentLoading\n * Modify if the content is currently loading.\n * https://photoswipe.com/filters/#iscontentloading\n *\n * @prop {(isContentZoomable: boolean, content: Content) => boolean} isContentZoomable\n * Modify if the content can be zoomed.\n * https://photoswipe.com/filters/#iscontentzoomable\n *\n * @prop {(useContentPlaceholder: boolean, content: Content) => boolean} useContentPlaceholder\n * Modify if the placeholder should be used for the content.\n * https://photoswipe.com/filters/#usecontentplaceholder\n *\n * @prop {(isKeepingPlaceholder: boolean, content: Content) => boolean} isKeepingPlaceholder\n * Modify if the placeholder should be kept after the content is loaded.\n * https://photoswipe.com/filters/#iskeepingplaceholder\n *\n *\n * @prop {(contentErrorElement: HTMLElement, content: Content) => HTMLElement} contentErrorElement\n * Modify an element when the content has error state (for example, if image cannot be loaded).\n * https://photoswipe.com/filters/#contenterrorelement\n *\n * @prop {(element: HTMLElement, data: UIElementData) => HTMLElement} uiElement\n * Modify a UI element that's being created.\n * https://photoswipe.com/filters/#uielement\n *\n * @prop {(thumbnail: HTMLElement | null | undefined, itemData: SlideData, index: number) => HTMLElement} thumbEl\n * Modify the thumbnail element from which opening zoom animation starts or ends.\n * https://photoswipe.com/filters/#thumbel\n *\n * @prop {(thumbBounds: Bounds | undefined, itemData: SlideData, index: number) => Bounds} thumbBounds\n * Modify the thumbnail bounds from which opening zoom animation starts or ends.\n * https://photoswipe.com/filters/#thumbbounds\n *\n * @prop {(srcsetSizesWidth: number, content: Content) => number} srcsetSizesWidth\n *\n * @prop {(preventPointerEvent: boolean, event: PointerEvent, pointerType: string) => boolean} preventPointerEvent\n *\n */\n\n/**\n * @template {keyof PhotoSwipeFiltersMap} T\n * @typedef {{ fn: PhotoSwipeFiltersMap[T], priority: number }} Filter\n */\n\n/**\n * @template {keyof PhotoSwipeEventsMap} T\n * @typedef {PhotoSwipeEventsMap[T] extends undefined ? PhotoSwipeEvent<T> : PhotoSwipeEvent<T> & PhotoSwipeEventsMap[T]} AugmentedEvent\n */\n\n/**\n * @template {keyof PhotoSwipeEventsMap} T\n * @typedef {(event: AugmentedEvent<T>) => void} EventCallback\n */\n\n/**\n * Base PhotoSwipe event object\n *\n * @template {keyof PhotoSwipeEventsMap} T\n */\nclass PhotoSwipeEvent {\n  /**\n   * @param {T} type\n   * @param {PhotoSwipeEventsMap[T]} [details]\n   */\n  constructor(type, details) {\n    this.type = type;\n    this.defaultPrevented = false;\n    if (details) {\n      Object.assign(this, details);\n    }\n  }\n\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n}\n\n/**\n * PhotoSwipe base class that can listen and dispatch for events.\n * Shared by PhotoSwipe Core and PhotoSwipe Lightbox, extended by base.js\n */\nclass Eventable {\n  constructor() {\n    /**\n     * @type {{ [T in keyof PhotoSwipeEventsMap]?: ((event: AugmentedEvent<T>) => void)[] }}\n     */\n    this._listeners = {};\n\n    /**\n     * @type {{ [T in keyof PhotoSwipeFiltersMap]?: Filter<T>[] }}\n     */\n    this._filters = {};\n\n    /** @type {PhotoSwipe | undefined} */\n    this.pswp = undefined;\n\n    /** @type {PhotoSwipeOptions | undefined} */\n    this.options = undefined;\n  }\n\n  /**\n   * @template {keyof PhotoSwipeFiltersMap} T\n   * @param {T} name\n   * @param {PhotoSwipeFiltersMap[T]} fn\n   * @param {number} priority\n   */\n  addFilter(name, fn, priority = 100) {\n    if (!this._filters[name]) {\n      this._filters[name] = [];\n    }\n\n    this._filters[name]?.push({ fn, priority });\n    this._filters[name]?.sort((f1, f2) => f1.priority - f2.priority);\n\n    this.pswp?.addFilter(name, fn, priority);\n  }\n\n  /**\n   * @template {keyof PhotoSwipeFiltersMap} T\n   * @param {T} name\n   * @param {PhotoSwipeFiltersMap[T]} fn\n   */\n  removeFilter(name, fn) {\n    if (this._filters[name]) {\n      // @ts-expect-error\n      this._filters[name] = this._filters[name].filter(filter => (filter.fn !== fn));\n    }\n\n    if (this.pswp) {\n      this.pswp.removeFilter(name, fn);\n    }\n  }\n\n  /**\n   * @template {keyof PhotoSwipeFiltersMap} T\n   * @param {T} name\n   * @param {Parameters<PhotoSwipeFiltersMap[T]>} args\n   * @returns {Parameters<PhotoSwipeFiltersMap[T]>[0]}\n   */\n  applyFilters(name, ...args) {\n    this._filters[name]?.forEach((filter) => {\n      // @ts-expect-error\n      args[0] = filter.fn.apply(this, args);\n    });\n    return args[0];\n  }\n\n  /**\n   * @template {keyof PhotoSwipeEventsMap} T\n   * @param {T} name\n   * @param {EventCallback<T>} fn\n   */\n  on(name, fn) {\n    if (!this._listeners[name]) {\n      this._listeners[name] = [];\n    }\n    this._listeners[name]?.push(fn);\n\n    // When binding events to lightbox,\n    // also bind events to PhotoSwipe Core,\n    // if it's open.\n    this.pswp?.on(name, fn);\n  }\n\n  /**\n   * @template {keyof PhotoSwipeEventsMap} T\n   * @param {T} name\n   * @param {EventCallback<T>} fn\n   */\n  off(name, fn) {\n    if (this._listeners[name]) {\n      // @ts-expect-error\n      this._listeners[name] = this._listeners[name].filter(listener => (fn !== listener));\n    }\n\n    this.pswp?.off(name, fn);\n  }\n\n  /**\n   * @template {keyof PhotoSwipeEventsMap} T\n   * @param {T} name\n   * @param {PhotoSwipeEventsMap[T]} [details]\n   * @returns {AugmentedEvent<T>}\n   */\n  dispatch(name, details) {\n    if (this.pswp) {\n      return this.pswp.dispatch(name, details);\n    }\n\n    const event = /** @type {AugmentedEvent<T>} */ (new PhotoSwipeEvent(name, details));\n\n    this._listeners[name]?.forEach((listener) => {\n      listener.call(this, event);\n    });\n\n    return event;\n  }\n}\n\nexport default Eventable;\n","import { createElement, setWidthHeight, toTransformString } from '../util/util.js';\n\nclass Placeholder {\n  /**\n   * @param {string | false} imageSrc\n   * @param {HTMLElement} container\n   */\n  constructor(imageSrc, container) {\n    // Create placeholder\n    // (stretched thumbnail or simple div behind the main image)\n    /** @type {HTMLImageElement | HTMLDivElement | null} */\n    this.element = createElement(\n      'pswp__img pswp__img--placeholder',\n      imageSrc ? 'img' : 'div',\n      container\n    );\n\n    if (imageSrc) {\n      const imgEl = /** @type {HTMLImageElement} */ (this.element);\n      imgEl.decoding = 'async';\n      imgEl.alt = '';\n      imgEl.src = imageSrc;\n      imgEl.setAttribute('role', 'presentation');\n    }\n\n    this.element.setAttribute('aria-hidden', 'true');\n  }\n\n  /**\n   * @param {number} width\n   * @param {number} height\n   */\n  setDisplayedSize(width, height) {\n    if (!this.element) {\n      return;\n    }\n\n    if (this.element.tagName === 'IMG') {\n      // Use transform scale() to modify img placeholder size\n      // (instead of changing width/height directly).\n      // This helps with performance, specifically in iOS15 Safari.\n      setWidthHeight(this.element, 250, 'auto');\n      this.element.style.transformOrigin = '0 0';\n      this.element.style.transform = toTransformString(0, 0, width / 250);\n    } else {\n      setWidthHeight(this.element, width, height);\n    }\n  }\n\n  destroy() {\n    if (this.element?.parentNode) {\n      this.element.remove();\n    }\n    this.element = null;\n  }\n}\n\nexport default Placeholder;\n","import { createElement, isSafari, LOAD_STATE, setWidthHeight } from '../util/util.js';\nimport Placeholder from './placeholder.js';\n\n/** @typedef {import('./slide.js').default} Slide */\n/** @typedef {import('./slide.js').SlideData} SlideData */\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\n/** @typedef {import('../util/util.js').LoadState} LoadState */\n\nclass Content {\n  /**\n   * @param {SlideData} itemData Slide data\n   * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox instance\n   * @param {number} index\n   */\n  constructor(itemData, instance, index) {\n    this.instance = instance;\n    this.data = itemData;\n    this.index = index;\n\n    /** @type {HTMLImageElement | HTMLDivElement | undefined} */\n    this.element = undefined;\n    /** @type {Placeholder | undefined} */\n    this.placeholder = undefined;\n    /** @type {Slide | undefined} */\n    this.slide = undefined;\n\n    this.displayedImageWidth = 0;\n    this.displayedImageHeight = 0;\n\n    this.width = Number(this.data.w) || Number(this.data.width) || 0;\n    this.height = Number(this.data.h) || Number(this.data.height) || 0;\n\n    this.isAttached = false;\n    this.hasSlide = false;\n    this.isDecoding = false;\n    /** @type {LoadState} */\n    this.state = LOAD_STATE.IDLE;\n\n    if (this.data.type) {\n      this.type = this.data.type;\n    } else if (this.data.src) {\n      this.type = 'image';\n    } else {\n      this.type = 'html';\n    }\n\n    this.instance.dispatch('contentInit', { content: this });\n  }\n\n  removePlaceholder() {\n    if (this.placeholder && !this.keepPlaceholder()) {\n      // With delay, as image might be loaded, but not rendered\n      setTimeout(() => {\n        if (this.placeholder) {\n          this.placeholder.destroy();\n          this.placeholder = undefined;\n        }\n      }, 1000);\n    }\n  }\n\n  /**\n   * Preload content\n   *\n   * @param {boolean} isLazy\n   * @param {boolean} [reload]\n   */\n  load(isLazy, reload) {\n    if (this.slide && this.usePlaceholder()) {\n      if (!this.placeholder) {\n        const placeholderSrc = this.instance.applyFilters(\n          'placeholderSrc',\n          // use  image-based placeholder only for the first slide,\n          // as rendering (even small stretched thumbnail) is an expensive operation\n          (this.data.msrc && this.slide.isFirstSlide) ? this.data.msrc : false,\n          this\n        );\n        this.placeholder = new Placeholder(\n          placeholderSrc,\n          this.slide.container\n        );\n      } else {\n        const placeholderEl = this.placeholder.element;\n        // Add placeholder to DOM if it was already created\n        if (placeholderEl && !placeholderEl.parentElement) {\n          this.slide.container.prepend(placeholderEl);\n        }\n      }\n    }\n\n    if (this.element && !reload) {\n      return;\n    }\n\n    if (this.instance.dispatch('contentLoad', { content: this, isLazy }).defaultPrevented) {\n      return;\n    }\n\n    if (this.isImageContent()) {\n      this.element = createElement('pswp__img', 'img');\n      // Start loading only after width is defined, as sizes might depend on it.\n      // Due to Safari feature, we must define sizes before srcset.\n      if (this.displayedImageWidth) {\n        this.loadImage(isLazy);\n      }\n    } else {\n      this.element = createElement('pswp__content', 'div');\n      this.element.innerHTML = this.data.html || '';\n    }\n\n    if (reload && this.slide) {\n      this.slide.updateContentSize(true);\n    }\n  }\n\n  /**\n   * Preload image\n   *\n   * @param {boolean} isLazy\n   */\n  loadImage(isLazy) {\n    if (!this.isImageContent()\n      || !this.element\n      || this.instance.dispatch('contentLoadImage', { content: this, isLazy }).defaultPrevented) {\n      return;\n    }\n\n    const imageElement = /** @type HTMLImageElement */ (this.element);\n\n    this.updateSrcsetSizes();\n\n    if (this.data.srcset) {\n      imageElement.srcset = this.data.srcset;\n    }\n\n    imageElement.src = this.data.src ?? '';\n    imageElement.alt = this.data.alt ?? '';\n\n    this.state = LOAD_STATE.LOADING;\n\n    if (imageElement.complete) {\n      this.onLoaded();\n    } else {\n      imageElement.onload = () => {\n        this.onLoaded();\n      };\n\n      imageElement.onerror = () => {\n        this.onError();\n      };\n    }\n  }\n\n  /**\n   * Assign slide to content\n   *\n   * @param {Slide} slide\n   */\n  setSlide(slide) {\n    this.slide = slide;\n    this.hasSlide = true;\n    this.instance = slide.pswp;\n\n    // todo: do we need to unset slide?\n  }\n\n  /**\n   * Content load success handler\n   */\n  onLoaded() {\n    this.state = LOAD_STATE.LOADED;\n\n    if (this.slide && this.element) {\n      this.instance.dispatch('loadComplete', { slide: this.slide, content: this });\n\n      // if content is reloaded\n      if (this.slide.isActive\n          && this.slide.heavyAppended\n          && !this.element.parentNode) {\n        this.append();\n        this.slide.updateContentSize(true);\n      }\n\n      if (this.state === LOAD_STATE.LOADED || this.state === LOAD_STATE.ERROR) {\n        this.removePlaceholder();\n      }\n    }\n  }\n\n  /**\n   * Content load error handler\n   */\n  onError() {\n    this.state = LOAD_STATE.ERROR;\n\n    if (this.slide) {\n      this.displayError();\n      this.instance.dispatch('loadComplete', { slide: this.slide, isError: true, content: this });\n      this.instance.dispatch('loadError', { slide: this.slide, content: this });\n    }\n  }\n\n  /**\n   * @returns {Boolean} If the content is currently loading\n   */\n  isLoading() {\n    return this.instance.applyFilters(\n      'isContentLoading',\n      this.state === LOAD_STATE.LOADING,\n      this\n    );\n  }\n\n  /**\n   * @returns {Boolean} If the content is in error state\n   */\n  isError() {\n    return this.state === LOAD_STATE.ERROR;\n  }\n\n  /**\n   * @returns {boolean} If the content is image\n   */\n  isImageContent() {\n    return this.type === 'image';\n  }\n\n  /**\n   * Update content size\n   *\n   * @param {Number} width\n   * @param {Number} height\n   */\n  setDisplayedSize(width, height) {\n    if (!this.element) {\n      return;\n    }\n\n    if (this.placeholder) {\n      this.placeholder.setDisplayedSize(width, height);\n    }\n\n    if (this.instance.dispatch(\n      'contentResize',\n      { content: this, width, height }).defaultPrevented\n    ) {\n      return;\n    }\n\n    setWidthHeight(this.element, width, height);\n\n    if (this.isImageContent() && !this.isError()) {\n      const isInitialSizeUpdate = (!this.displayedImageWidth && width);\n\n      this.displayedImageWidth = width;\n      this.displayedImageHeight = height;\n\n      if (isInitialSizeUpdate) {\n        this.loadImage(false);\n      } else {\n        this.updateSrcsetSizes();\n      }\n\n      if (this.slide) {\n        this.instance.dispatch(\n          'imageSizeChange',\n          { slide: this.slide, width, height, content: this }\n        );\n      }\n    }\n  }\n\n  /**\n   * @returns {boolean} If the content can be zoomed\n   */\n  isZoomable() {\n    return this.instance.applyFilters(\n      'isContentZoomable',\n      this.isImageContent() && (this.state !== LOAD_STATE.ERROR),\n      this\n    );\n  }\n\n  /**\n   * Update image srcset sizes attribute based on width and height\n   */\n  updateSrcsetSizes() {\n    // Handle srcset sizes attribute.\n    //\n    // Never lower quality, if it was increased previously.\n    // Chrome does this automatically, Firefox and Safari do not,\n    // so we store largest used size in dataset.\n    if (!this.isImageContent() || !this.element || !this.data.srcset) {\n      return;\n    }\n\n    const image = /** @type HTMLImageElement */ (this.element);\n    const sizesWidth = this.instance.applyFilters(\n      'srcsetSizesWidth',\n      this.displayedImageWidth,\n      this\n    );\n\n    if (\n      !image.dataset.largestUsedSize\n      || sizesWidth > parseInt(image.dataset.largestUsedSize, 10)\n    ) {\n      image.sizes = sizesWidth + 'px';\n      image.dataset.largestUsedSize = String(sizesWidth);\n    }\n  }\n\n  /**\n   * @returns {boolean} If content should use a placeholder (from msrc by default)\n   */\n  usePlaceholder() {\n    return this.instance.applyFilters(\n      'useContentPlaceholder',\n      this.isImageContent(),\n      this\n    );\n  }\n\n  /**\n   * Preload content with lazy-loading param\n   */\n  lazyLoad() {\n    if (this.instance.dispatch('contentLazyLoad', { content: this }).defaultPrevented) {\n      return;\n    }\n\n    this.load(true);\n  }\n\n  /**\n   * @returns {boolean} If placeholder should be kept after content is loaded\n   */\n  keepPlaceholder() {\n    return this.instance.applyFilters(\n      'isKeepingPlaceholder',\n      this.isLoading(),\n      this\n    );\n  }\n\n  /**\n   * Destroy the content\n   */\n  destroy() {\n    this.hasSlide = false;\n    this.slide = undefined;\n\n    if (this.instance.dispatch('contentDestroy', { content: this }).defaultPrevented) {\n      return;\n    }\n\n    this.remove();\n\n    if (this.placeholder) {\n      this.placeholder.destroy();\n      this.placeholder = undefined;\n    }\n\n    if (this.isImageContent() && this.element) {\n      this.element.onload = null;\n      this.element.onerror = null;\n      this.element = undefined;\n    }\n  }\n\n  /**\n   * Display error message\n   */\n  displayError() {\n    if (this.slide) {\n      let errorMsgEl = createElement('pswp__error-msg', 'div');\n      errorMsgEl.innerText = this.instance.options?.errorMsg ?? '';\n      errorMsgEl = /** @type {HTMLDivElement} */ (this.instance.applyFilters(\n        'contentErrorElement',\n        errorMsgEl,\n        this\n      ));\n      this.element = createElement('pswp__content pswp__error-msg-container', 'div');\n      this.element.appendChild(errorMsgEl);\n      this.slide.container.innerText = '';\n      this.slide.container.appendChild(this.element);\n      this.slide.updateContentSize(true);\n      this.removePlaceholder();\n    }\n  }\n\n  /**\n   * Append the content\n   */\n  append() {\n    if (this.isAttached || !this.element) {\n      return;\n    }\n\n    this.isAttached = true;\n\n    if (this.state === LOAD_STATE.ERROR) {\n      this.displayError();\n      return;\n    }\n\n    if (this.instance.dispatch('contentAppend', { content: this }).defaultPrevented) {\n      return;\n    }\n\n    const supportsDecode = ('decode' in this.element);\n\n    if (this.isImageContent()) {\n      // Use decode() on nearby slides\n      //\n      // Nearby slide images are in DOM and not hidden via display:none.\n      // However, they are placed offscreen (to the left and right side).\n      //\n      // Some browsers do not composite the image until it's actually visible,\n      // using decode() helps.\n      //\n      // You might ask \"why dont you just decode() and then append all images\",\n      // that's because I want to show image before it's fully loaded,\n      // as browser can render parts of image while it is loading.\n      // We do not do this in Safari due to partial loading bug.\n      if (supportsDecode && this.slide && (!this.slide.isActive || isSafari())) {\n        this.isDecoding = true;\n        // purposefully using finally instead of then,\n        // as if srcset sizes changes dynamically - it may cause decode error\n        /** @type {HTMLImageElement} */\n        (this.element).decode().catch(() => {}).finally(() => {\n          this.isDecoding = false;\n          this.appendImage();\n        });\n      } else {\n        this.appendImage();\n      }\n    } else if (this.slide && !this.element.parentNode) {\n      this.slide.container.appendChild(this.element);\n    }\n  }\n\n  /**\n   * Activate the slide,\n   * active slide is generally the current one,\n   * meaning the user can see it.\n   */\n  activate() {\n    if (this.instance.dispatch('contentActivate', { content: this }).defaultPrevented\n      || !this.slide) {\n      return;\n    }\n\n    if (this.isImageContent() && this.isDecoding && !isSafari()) {\n      // add image to slide when it becomes active,\n      // even if it's not finished decoding\n      this.appendImage();\n    } else if (this.isError()) {\n      this.load(false, true); // try to reload\n    }\n\n    if (this.slide.holderElement) {\n      this.slide.holderElement.setAttribute('aria-hidden', 'false');\n    }\n  }\n\n  /**\n   * Deactivate the content\n   */\n  deactivate() {\n    this.instance.dispatch('contentDeactivate', { content: this });\n    if (this.slide && this.slide.holderElement) {\n      this.slide.holderElement.setAttribute('aria-hidden', 'true');\n    }\n  }\n\n\n  /**\n   * Remove the content from DOM\n   */\n  remove() {\n    this.isAttached = false;\n\n    if (this.instance.dispatch('contentRemove', { content: this }).defaultPrevented) {\n      return;\n    }\n\n    if (this.element && this.element.parentNode) {\n      this.element.remove();\n    }\n\n    if (this.placeholder && this.placeholder.element) {\n      this.placeholder.element.remove();\n    }\n  }\n\n  /**\n   * Append the image content to slide container\n   */\n  appendImage() {\n    if (!this.isAttached) {\n      return;\n    }\n\n    if (this.instance.dispatch('contentAppendImage', { content: this }).defaultPrevented) {\n      return;\n    }\n\n    // ensure that element exists and is not already appended\n    if (this.slide && this.element && !this.element.parentNode) {\n      this.slide.container.appendChild(this.element);\n    }\n\n    if (this.state === LOAD_STATE.LOADED || this.state === LOAD_STATE.ERROR) {\n      this.removePlaceholder();\n    }\n  }\n}\n\nexport default Content;\n","/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\n/** @typedef {import('../photoswipe.js').Point} Point */\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\n\n/**\n * @param {PhotoSwipeOptions} options\n * @param {PhotoSwipeBase} pswp\n * @returns {Point}\n */\nexport function getViewportSize(options, pswp) {\n  if (options.getViewportSizeFn) {\n    const newViewportSize = options.getViewportSizeFn(options, pswp);\n    if (newViewportSize) {\n      return newViewportSize;\n    }\n  }\n\n  return {\n    x: document.documentElement.clientWidth,\n\n    // TODO: height on mobile is very incosistent due to toolbar\n    // find a way to improve this\n    //\n    // document.documentElement.clientHeight - doesn't seem to work well\n    y: window.innerHeight\n  };\n}\n\n/**\n * Parses padding option.\n * Supported formats:\n *\n * // Object\n * padding: {\n *  top: 0,\n *  bottom: 0,\n *  left: 0,\n *  right: 0\n * }\n *\n * // A function that returns the object\n * paddingFn: (viewportSize, itemData, index) => {\n *  return {\n *    top: 0,\n *    bottom: 0,\n *    left: 0,\n *    right: 0\n *  };\n * }\n *\n * // Legacy variant\n * paddingLeft: 0,\n * paddingRight: 0,\n * paddingTop: 0,\n * paddingBottom: 0,\n *\n * @param {'left' | 'top' | 'bottom' | 'right'} prop\n * @param {PhotoSwipeOptions} options PhotoSwipe options\n * @param {Point} viewportSize PhotoSwipe viewport size, for example: { x:800, y:600 }\n * @param {SlideData} itemData Data about the slide\n * @param {number} index Slide index\n * @returns {number}\n */\nexport function parsePaddingOption(prop, options, viewportSize, itemData, index) {\n  let paddingValue = 0;\n\n  if (options.paddingFn) {\n    paddingValue = options.paddingFn(viewportSize, itemData, index)[prop];\n  } else if (options.padding) {\n    paddingValue = options.padding[prop];\n  } else {\n    const legacyPropName = 'padding' + prop[0].toUpperCase() + prop.slice(1);\n    // @ts-expect-error\n    if (options[legacyPropName]) {\n      // @ts-expect-error\n      paddingValue = options[legacyPropName];\n    }\n  }\n\n  return Number(paddingValue) || 0;\n}\n\n/**\n * @param {PhotoSwipeOptions} options\n * @param {Point} viewportSize\n * @param {SlideData} itemData\n * @param {number} index\n * @returns {Point}\n */\nexport function getPanAreaSize(options, viewportSize, itemData, index) {\n  return {\n    x: viewportSize.x\n      - parsePaddingOption('left', options, viewportSize, itemData, index)\n      - parsePaddingOption('right', options, viewportSize, itemData, index),\n    y: viewportSize.y\n      - parsePaddingOption('top', options, viewportSize, itemData, index)\n      - parsePaddingOption('bottom', options, viewportSize, itemData, index)\n  };\n}\n","const MAX_IMAGE_WIDTH = 4000;\n\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\n/** @typedef {import('../photoswipe.js').Point} Point */\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\n\n/** @typedef {'fit' | 'fill' | number | ((zoomLevelObject: ZoomLevel) => number)} ZoomLevelOption */\n\n/**\n * Calculates zoom levels for specific slide.\n * Depends on viewport size and image size.\n */\nclass ZoomLevel {\n  /**\n   * @param {PhotoSwipeOptions} options PhotoSwipe options\n   * @param {SlideData} itemData Slide data\n   * @param {number} index Slide index\n   * @param {PhotoSwipe} [pswp] PhotoSwipe instance, can be undefined if not initialized yet\n   */\n  constructor(options, itemData, index, pswp) {\n    this.pswp = pswp;\n    this.options = options;\n    this.itemData = itemData;\n    this.index = index;\n    /** @type { Point | null } */\n    this.panAreaSize = null;\n    /** @type { Point | null } */\n    this.elementSize = null;\n    this.fit = 1;\n    this.fill = 1;\n    this.vFill = 1;\n    this.initial = 1;\n    this.secondary = 1;\n    this.max = 1;\n    this.min = 1;\n  }\n\n  /**\n   * Calculate initial, secondary and maximum zoom level for the specified slide.\n   *\n   * It should be called when either image or viewport size changes.\n   *\n   * @param {number} maxWidth\n   * @param {number} maxHeight\n   * @param {Point} panAreaSize\n   */\n  update(maxWidth, maxHeight, panAreaSize) {\n    /** @type {Point} */\n    const elementSize = { x: maxWidth, y: maxHeight };\n    this.elementSize = elementSize;\n    this.panAreaSize = panAreaSize;\n\n    const hRatio = panAreaSize.x / elementSize.x;\n    const vRatio = panAreaSize.y / elementSize.y;\n\n    this.fit = Math.min(1, hRatio < vRatio ? hRatio : vRatio);\n    this.fill = Math.min(1, hRatio > vRatio ? hRatio : vRatio);\n\n    // zoom.vFill defines zoom level of the image\n    // when it has 100% of viewport vertical space (height)\n    this.vFill = Math.min(1, vRatio);\n\n    this.initial = this._getInitial();\n    this.secondary = this._getSecondary();\n    this.max = Math.max(\n      this.initial,\n      this.secondary,\n      this._getMax()\n    );\n\n    this.min = Math.min(\n      this.fit,\n      this.initial,\n      this.secondary\n    );\n\n    if (this.pswp) {\n      this.pswp.dispatch('zoomLevelsUpdate', { zoomLevels: this, slideData: this.itemData });\n    }\n  }\n\n  /**\n   * Parses user-defined zoom option.\n   *\n   * @private\n   * @param {'initial' | 'secondary' | 'max'} optionPrefix Zoom level option prefix (initial, secondary, max)\n   * @returns { number | undefined }\n   */\n  _parseZoomLevelOption(optionPrefix) {\n    const optionName = /** @type {'initialZoomLevel' | 'secondaryZoomLevel' | 'maxZoomLevel'} */ (\n      optionPrefix + 'ZoomLevel'\n    );\n    const optionValue = this.options[optionName];\n\n    if (!optionValue) {\n      return;\n    }\n\n    if (typeof optionValue === 'function') {\n      return optionValue(this);\n    }\n\n    if (optionValue === 'fill') {\n      return this.fill;\n    }\n\n    if (optionValue === 'fit') {\n      return this.fit;\n    }\n\n    return Number(optionValue);\n  }\n\n  /**\n   * Get zoom level to which image will be zoomed after double-tap gesture,\n   * or when user clicks on zoom icon,\n   * or mouse-click on image itself.\n   * If you return 1 image will be zoomed to its original size.\n   *\n   * @private\n   * @return {number}\n   */\n  _getSecondary() {\n    let currZoomLevel = this._parseZoomLevelOption('secondary');\n\n    if (currZoomLevel) {\n      return currZoomLevel;\n    }\n\n    // 3x of \"fit\" state, but not larger than original\n    currZoomLevel = Math.min(1, this.fit * 3);\n\n    if (this.elementSize && currZoomLevel * this.elementSize.x > MAX_IMAGE_WIDTH) {\n      currZoomLevel = MAX_IMAGE_WIDTH / this.elementSize.x;\n    }\n\n    return currZoomLevel;\n  }\n\n  /**\n   * Get initial image zoom level.\n   *\n   * @private\n   * @return {number}\n   */\n  _getInitial() {\n    return this._parseZoomLevelOption('initial') || this.fit;\n  }\n\n  /**\n   * Maximum zoom level when user zooms\n   * via zoom/pinch gesture,\n   * via cmd/ctrl-wheel or via trackpad.\n   *\n   * @private\n   * @return {number}\n   */\n  _getMax() {\n    // max zoom level is x4 from \"fit state\",\n    // used for zoom gesture and ctrl/trackpad zoom\n    return this._parseZoomLevelOption('max') || Math.max(1, this.fit * 4);\n  }\n}\n\nexport default ZoomLevel;\n","import { getViewportSize, getPanAreaSize } from '../util/viewport-size.js';\nimport ZoomLevel from './zoom-level.js';\n\n/** @typedef {import('./content.js').default} Content */\n/** @typedef {import('./slide.js').default} Slide */\n/** @typedef {import('./slide.js').SlideData} SlideData */\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\n\nconst MIN_SLIDES_TO_CACHE = 5;\n\n/**\n * Lazy-load an image\n * This function is used both by Lightbox and PhotoSwipe core,\n * thus it can be called before dialog is opened.\n *\n * @param {SlideData} itemData Data about the slide\n * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox instance\n * @param {number} index\n * @returns {Content} Image that is being decoded or false.\n */\nexport function lazyLoadData(itemData, instance, index) {\n  const content = instance.createContentFromData(itemData, index);\n  /** @type {ZoomLevel | undefined} */\n  let zoomLevel;\n\n  const { options } = instance;\n\n  // We need to know dimensions of the image to preload it,\n  // as it might use srcset, and we need to define sizes\n  if (options) {\n    zoomLevel = new ZoomLevel(options, itemData, -1);\n\n    let viewportSize;\n    if (instance.pswp) {\n      viewportSize = instance.pswp.viewportSize;\n    } else {\n      viewportSize = getViewportSize(options, instance);\n    }\n\n    const panAreaSize = getPanAreaSize(options, viewportSize, itemData, index);\n    zoomLevel.update(content.width, content.height, panAreaSize);\n  }\n\n  content.lazyLoad();\n\n  if (zoomLevel) {\n    content.setDisplayedSize(\n      Math.ceil(content.width * zoomLevel.initial),\n      Math.ceil(content.height * zoomLevel.initial)\n    );\n  }\n\n  return content;\n}\n\n\n/**\n * Lazy-loads specific slide.\n * This function is used both by Lightbox and PhotoSwipe core,\n * thus it can be called before dialog is opened.\n *\n * By default, it loads image based on viewport size and initial zoom level.\n *\n * @param {number} index Slide index\n * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox eventable instance\n * @returns {Content | undefined}\n */\nexport function lazyLoadSlide(index, instance) {\n  const itemData = instance.getItemData(index);\n\n  if (instance.dispatch('lazyLoadSlide', { index, itemData }).defaultPrevented) {\n    return;\n  }\n\n  return lazyLoadData(itemData, instance, index);\n}\n\nclass ContentLoader {\n  /**\n   * @param {PhotoSwipe} pswp\n   */\n  constructor(pswp) {\n    this.pswp = pswp;\n    // Total amount of cached images\n    this.limit = Math.max(\n      pswp.options.preload[0] + pswp.options.preload[1] + 1,\n      MIN_SLIDES_TO_CACHE\n    );\n    /** @type {Content[]} */\n    this._cachedItems = [];\n  }\n\n  /**\n   * Lazy load nearby slides based on `preload` option.\n   *\n   * @param {number} [diff] Difference between slide indexes that was changed recently, or 0.\n   */\n  updateLazy(diff) {\n    const { pswp } = this;\n\n    if (pswp.dispatch('lazyLoad').defaultPrevented) {\n      return;\n    }\n\n    const { preload } = pswp.options;\n    const isForward = diff === undefined ? true : (diff >= 0);\n    let i;\n\n    // preload[1] - num items to preload in forward direction\n    for (i = 0; i <= preload[1]; i++) {\n      this.loadSlideByIndex(pswp.currIndex + (isForward ? i : (-i)));\n    }\n\n    // preload[0] - num items to preload in backward direction\n    for (i = 1; i <= preload[0]; i++) {\n      this.loadSlideByIndex(pswp.currIndex + (isForward ? (-i) : i));\n    }\n  }\n\n  /**\n   * @param {number} initialIndex\n   */\n  loadSlideByIndex(initialIndex) {\n    const index = this.pswp.getLoopedIndex(initialIndex);\n    // try to get cached content\n    let content = this.getContentByIndex(index);\n    if (!content) {\n      // no cached content, so try to load from scratch:\n      content = lazyLoadSlide(index, this.pswp);\n      // if content can be loaded, add it to cache:\n      if (content) {\n        this.addToCache(content);\n      }\n    }\n  }\n\n  /**\n   * @param {Slide} slide\n   * @returns {Content}\n   */\n  getContentBySlide(slide) {\n    let content = this.getContentByIndex(slide.index);\n    if (!content) {\n      // create content if not found in cache\n      content = this.pswp.createContentFromData(slide.data, slide.index);\n      this.addToCache(content);\n    }\n\n    // assign slide to content\n    content.setSlide(slide);\n\n    return content;\n  }\n\n  /**\n   * @param {Content} content\n   */\n  addToCache(content) {\n    // move to the end of array\n    this.removeByIndex(content.index);\n    this._cachedItems.push(content);\n\n    if (this._cachedItems.length > this.limit) {\n      // Destroy the first content that's not attached\n      const indexToRemove = this._cachedItems.findIndex((item) => {\n        return !item.isAttached && !item.hasSlide;\n      });\n      if (indexToRemove !== -1) {\n        const removedItem = this._cachedItems.splice(indexToRemove, 1)[0];\n        removedItem.destroy();\n      }\n    }\n  }\n\n  /**\n   * Removes an image from cache, does not destroy() it, just removes.\n   *\n   * @param {number} index\n   */\n  removeByIndex(index) {\n    const indexToRemove = this._cachedItems.findIndex(item => item.index === index);\n    if (indexToRemove !== -1) {\n      this._cachedItems.splice(indexToRemove, 1);\n    }\n  }\n\n  /**\n   * @param {number} index\n   * @returns {Content | undefined}\n   */\n  getContentByIndex(index) {\n    return this._cachedItems.find(content => content.index === index);\n  }\n\n  destroy() {\n    this._cachedItems.forEach(content => content.destroy());\n    this._cachedItems = [];\n  }\n}\n\nexport default ContentLoader;\n","import Eventable from './eventable.js';\nimport { getElementsFromOption } from '../util/util.js';\nimport Content from '../slide/content.js';\nimport { lazyLoadData } from '../slide/loader.js';\n\n/** @typedef {import(\"../photoswipe.js\").default} PhotoSwipe */\n/** @typedef {import(\"../slide/slide.js\").SlideData} SlideData */\n\n/**\n * PhotoSwipe base class that can retrieve data about every slide.\n * Shared by PhotoSwipe Core and PhotoSwipe Lightbox\n */\nclass PhotoSwipeBase extends Eventable {\n  /**\n   * Get total number of slides\n   *\n   * @returns {number}\n   */\n  getNumItems() {\n    let numItems = 0;\n    const dataSource = this.options?.dataSource;\n\n    if (dataSource && 'length' in dataSource) {\n      // may be an array or just object with length property\n      numItems = dataSource.length;\n    } else if (dataSource && 'gallery' in dataSource) {\n      // query DOM elements\n      if (!dataSource.items) {\n        dataSource.items = this._getGalleryDOMElements(dataSource.gallery);\n      }\n\n      if (dataSource.items) {\n        numItems = dataSource.items.length;\n      }\n    }\n\n    // legacy event, before filters were introduced\n    const event = this.dispatch('numItems', {\n      dataSource,\n      numItems\n    });\n    return this.applyFilters('numItems', event.numItems, dataSource);\n  }\n\n  /**\n   * @param {SlideData} slideData\n   * @param {number} index\n   * @returns {Content}\n   */\n  createContentFromData(slideData, index) {\n    return new Content(slideData, this, index);\n  }\n\n  /**\n   * Get item data by index.\n   *\n   * \"item data\" should contain normalized information that PhotoSwipe needs to generate a slide.\n   * For example, it may contain properties like\n   * `src`, `srcset`, `w`, `h`, which will be used to generate a slide with image.\n   *\n   * @param {number} index\n   * @returns {SlideData}\n   */\n  getItemData(index) {\n    const dataSource = this.options?.dataSource;\n    /** @type {SlideData | HTMLElement} */\n    let dataSourceItem = {};\n    if (Array.isArray(dataSource)) {\n      // Datasource is an array of elements\n      dataSourceItem = dataSource[index];\n    } else if (dataSource && 'gallery' in dataSource) {\n      // dataSource has gallery property,\n      // thus it was created by Lightbox, based on\n      // gallery and children options\n\n      // query DOM elements\n      if (!dataSource.items) {\n        dataSource.items = this._getGalleryDOMElements(dataSource.gallery);\n      }\n\n      dataSourceItem = dataSource.items[index];\n    }\n\n    let itemData = dataSourceItem;\n\n    if (itemData instanceof Element) {\n      itemData = this._domElementToItemData(itemData);\n    }\n\n    // Dispatching the itemData event,\n    // it's a legacy verion before filters were introduced\n    const event = this.dispatch('itemData', {\n      itemData: itemData || {},\n      index\n    });\n\n    return this.applyFilters('itemData', event.itemData, index);\n  }\n\n  /**\n   * Get array of gallery DOM elements,\n   * based on childSelector and gallery element.\n   *\n   * @param {HTMLElement} galleryElement\n   * @returns {HTMLElement[]}\n   */\n  _getGalleryDOMElements(galleryElement) {\n    if (this.options?.children || this.options?.childSelector) {\n      return getElementsFromOption(\n        this.options.children,\n        this.options.childSelector,\n        galleryElement\n      ) || [];\n    }\n\n    return [galleryElement];\n  }\n\n  /**\n   * Converts DOM element to item data object.\n   *\n   * @param {HTMLElement} element DOM element\n   * @returns {SlideData}\n   */\n  _domElementToItemData(element) {\n    /** @type {SlideData} */\n    const itemData = {\n      element\n    };\n\n    const linkEl = /** @type {HTMLAnchorElement} */ (\n      element.tagName === 'A'\n        ? element\n        : element.querySelector('a')\n    );\n\n    if (linkEl) {\n      // src comes from data-pswp-src attribute,\n      // if it's empty link href is used\n      itemData.src = linkEl.dataset.pswpSrc || linkEl.href;\n\n      if (linkEl.dataset.pswpSrcset) {\n        itemData.srcset = linkEl.dataset.pswpSrcset;\n      }\n\n      itemData.width = linkEl.dataset.pswpWidth ? parseInt(linkEl.dataset.pswpWidth, 10) : 0;\n      itemData.height = linkEl.dataset.pswpHeight ? parseInt(linkEl.dataset.pswpHeight, 10) : 0;\n\n      // support legacy w & h properties\n      itemData.w = itemData.width;\n      itemData.h = itemData.height;\n\n      if (linkEl.dataset.pswpType) {\n        itemData.type = linkEl.dataset.pswpType;\n      }\n\n      const thumbnailEl = element.querySelector('img');\n\n      if (thumbnailEl) {\n        // msrc is URL to placeholder image that's displayed before large image is loaded\n        // by default it's displayed only for the first slide\n        itemData.msrc = thumbnailEl.currentSrc || thumbnailEl.src;\n        itemData.alt = thumbnailEl.getAttribute('alt') ?? '';\n      }\n\n      if (linkEl.dataset.pswpCropped || linkEl.dataset.cropped) {\n        itemData.thumbCropped = true;\n      }\n    }\n\n    return this.applyFilters('domItemData', itemData, element, linkEl);\n  }\n\n  /**\n   * Lazy-load by slide data\n   *\n   * @param {SlideData} itemData Data about the slide\n   * @param {number} index\n   * @returns {Content} Image that is being decoded or false.\n   */\n  lazyLoadData(itemData, index) {\n    return lazyLoadData(itemData, this, index);\n  }\n}\n\nexport default PhotoSwipeBase;\n","import {\n  specialKeyUsed,\n  getElementsFromOption,\n  isPswpClass\n} from '../util/util.js';\n\nimport PhotoSwipeBase from '../core/base.js';\nimport { lazyLoadSlide } from '../slide/loader.js';\n\n/**\n * @template T\n * @typedef {import('../types.js').Type<T>} Type<T>\n */\n\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\n/** @typedef {import('../photoswipe.js').DataSource} DataSource */\n/** @typedef {import('../photoswipe.js').Point} Point */\n/** @typedef {import('../slide/content.js').default} Content */\n/** @typedef {import('../core/eventable.js').PhotoSwipeEventsMap} PhotoSwipeEventsMap */\n/** @typedef {import('../core/eventable.js').PhotoSwipeFiltersMap} PhotoSwipeFiltersMap */\n\n/**\n * @template {keyof PhotoSwipeEventsMap} T\n * @typedef {import('../core/eventable.js').EventCallback<T>} EventCallback<T>\n */\n\n/**\n * PhotoSwipe Lightbox\n *\n * - If user has unsupported browser it falls back to default browser action (just opens URL)\n * - Binds click event to links that should open PhotoSwipe\n * - parses DOM strcture for PhotoSwipe (retrieves large image URLs and sizes)\n * - Initializes PhotoSwipe\n *\n *\n * Loader options use the same object as PhotoSwipe, and supports such options:\n *\n * gallery - Element | Element[] | NodeList | string selector for the gallery element\n * children - Element | Element[] | NodeList | string selector for the gallery children\n *\n */\nclass PhotoSwipeLightbox extends PhotoSwipeBase {\n  /**\n   * @param {PhotoSwipeOptions} [options]\n   */\n  constructor(options) {\n    super();\n    /** @type {PhotoSwipeOptions} */\n    this.options = options || {};\n    this._uid = 0;\n    this.shouldOpen = false;\n    /**\n     * @private\n     * @type {Content | undefined}\n     */\n    this._preloadedContent = undefined;\n\n    this.onThumbnailsClick = this.onThumbnailsClick.bind(this);\n  }\n\n  /**\n   * Initialize lightbox, should be called only once.\n   * It's not included in the main constructor, so you may bind events before it.\n   */\n  init() {\n    // Bind click events to each gallery\n    getElementsFromOption(this.options.gallery, this.options.gallerySelector)\n      .forEach((galleryElement) => {\n        galleryElement.addEventListener('click', this.onThumbnailsClick, false);\n      });\n  }\n\n  /**\n   * @param {MouseEvent} e\n   */\n  onThumbnailsClick(e) {\n    // Exit and allow default browser action if:\n    if (specialKeyUsed(e) // ... if clicked with a special key (ctrl/cmd...)\n        || window.pswp) { // ... if PhotoSwipe is already open\n      return;\n    }\n\n    // If both clientX and clientY are 0 or not defined,\n    // the event is likely triggered by keyboard,\n    // so we do not pass the initialPoint\n    //\n    // Note that some screen readers emulate the mouse position,\n    // so it's not the ideal way to detect them.\n    //\n    /** @type {Point | null} */\n    let initialPoint = { x: e.clientX, y: e.clientY };\n\n    if (!initialPoint.x && !initialPoint.y) {\n      initialPoint = null;\n    }\n\n    let clickedIndex = this.getClickedIndex(e);\n    clickedIndex = this.applyFilters('clickedIndex', clickedIndex, e, this);\n    /** @type {DataSource} */\n    const dataSource = {\n      gallery: /** @type {HTMLElement} */ (e.currentTarget)\n    };\n\n    if (clickedIndex >= 0) {\n      e.preventDefault();\n      this.loadAndOpen(clickedIndex, dataSource, initialPoint);\n    }\n  }\n\n  /**\n   * Get index of gallery item that was clicked.\n   *\n   * @param {MouseEvent} e click event\n   * @returns {number}\n   */\n  getClickedIndex(e) {\n    // legacy option\n    if (this.options.getClickedIndexFn) {\n      return this.options.getClickedIndexFn.call(this, e);\n    }\n\n    const clickedTarget = /** @type {HTMLElement} */ (e.target);\n    const childElements = getElementsFromOption(\n      this.options.children,\n      this.options.childSelector,\n      /** @type {HTMLElement} */ (e.currentTarget)\n    );\n    const clickedChildIndex = childElements.findIndex(\n      child => child === clickedTarget || child.contains(clickedTarget)\n    );\n\n    if (clickedChildIndex !== -1) {\n      return clickedChildIndex;\n    } else if (this.options.children || this.options.childSelector) {\n      // click wasn't on a child element\n      return -1;\n    }\n\n    // There is only one item (which is the gallery)\n    return 0;\n  }\n\n  /**\n   * Load and open PhotoSwipe\n   *\n   * @param {number} index\n   * @param {DataSource} [dataSource]\n   * @param {Point | null} [initialPoint]\n   * @returns {boolean}\n   */\n  loadAndOpen(index, dataSource, initialPoint) {\n    // Check if the gallery is already open\n    if (window.pswp || !this.options) {\n      return false;\n    }\n\n    // Use the first gallery element if dataSource is not provided\n    if (!dataSource && this.options.gallery && this.options.children) {\n      const galleryElements = getElementsFromOption(this.options.gallery);\n      if (galleryElements[0]) {\n        dataSource = {\n          gallery: galleryElements[0]\n        };\n      }\n    }\n\n    // set initial index\n    this.options.index = index;\n\n    // define options for PhotoSwipe constructor\n    this.options.initialPointerPos = initialPoint;\n\n    this.shouldOpen = true;\n    this.preload(index, dataSource);\n    return true;\n  }\n\n  /**\n   * Load the main module and the slide content by index\n   *\n   * @param {number} index\n   * @param {DataSource} [dataSource]\n   */\n  preload(index, dataSource) {\n    const { options } = this;\n\n    if (dataSource) {\n      options.dataSource = dataSource;\n    }\n\n    // Add the main module\n    /** @type {Promise<Type<PhotoSwipe>>[]} */\n    const promiseArray = [];\n\n    const pswpModuleType = typeof options.pswpModule;\n    if (isPswpClass(options.pswpModule)) {\n      promiseArray.push(Promise.resolve(/** @type {Type<PhotoSwipe>} */ (options.pswpModule)));\n    } else if (pswpModuleType === 'string') {\n      throw new Error('pswpModule as string is no longer supported');\n    } else if (pswpModuleType === 'function') {\n      promiseArray.push(/** @type {() => Promise<Type<PhotoSwipe>>} */ (options.pswpModule)());\n    } else {\n      throw new Error('pswpModule is not valid');\n    }\n\n    // Add custom-defined promise, if any\n    if (typeof options.openPromise === 'function') {\n      // allow developers to perform some task before opening\n      promiseArray.push(options.openPromise());\n    }\n\n    if (options.preloadFirstSlide !== false && index >= 0) {\n      this._preloadedContent = lazyLoadSlide(index, this);\n    }\n\n    // Wait till all promises resolve and open PhotoSwipe\n    const uid = ++this._uid;\n    Promise.all(promiseArray).then((iterableModules) => {\n      if (this.shouldOpen) {\n        const mainModule = iterableModules[0];\n        this._openPhotoswipe(mainModule, uid);\n      }\n    });\n  }\n\n  /**\n   * @private\n   * @param {Type<PhotoSwipe> | { default: Type<PhotoSwipe> }} module\n   * @param {number} uid\n   */\n  _openPhotoswipe(module, uid) {\n    // Cancel opening if UID doesn't match the current one\n    // (if user clicked on another gallery item before current was loaded).\n    //\n    // Or if shouldOpen flag is set to false\n    // (developer may modify it via public API)\n    if (uid !== this._uid && this.shouldOpen) {\n      return;\n    }\n\n    this.shouldOpen = false;\n\n    // PhotoSwipe is already open\n    if (window.pswp) {\n      return;\n    }\n\n    /**\n     * Pass data to PhotoSwipe and open init\n     *\n     * @type {PhotoSwipe}\n     */\n    const pswp = typeof module === 'object'\n        ? new module.default(this.options) // eslint-disable-line\n        : new module(this.options); // eslint-disable-line\n\n    this.pswp = pswp;\n    window.pswp = pswp;\n\n    // map listeners from Lightbox to PhotoSwipe Core\n    /** @type {(keyof PhotoSwipeEventsMap)[]} */\n    (Object.keys(this._listeners)).forEach((name) => {\n      this._listeners[name]?.forEach((fn) => {\n        pswp.on(name, /** @type {EventCallback<typeof name>} */(fn));\n      });\n    });\n\n    // same with filters\n    /** @type {(keyof PhotoSwipeFiltersMap)[]} */\n    (Object.keys(this._filters)).forEach((name) => {\n      this._filters[name]?.forEach((filter) => {\n        pswp.addFilter(name, filter.fn, filter.priority);\n      });\n    });\n\n    if (this._preloadedContent) {\n      pswp.contentLoader.addToCache(this._preloadedContent);\n      this._preloadedContent = undefined;\n    }\n\n    pswp.on('destroy', () => {\n      // clean up public variables\n      this.pswp = undefined;\n      delete window.pswp;\n    });\n\n    pswp.init();\n  }\n\n  /**\n   * Unbinds all events, closes PhotoSwipe if it's open.\n   */\n  destroy() {\n    this.pswp?.destroy();\n\n    this.shouldOpen = false;\n    this._listeners = {};\n\n    getElementsFromOption(this.options.gallery, this.options.gallerySelector)\n      .forEach((galleryElement) => {\n        galleryElement.removeEventListener('click', this.onThumbnailsClick, false);\n      });\n  }\n}\n\nexport default PhotoSwipeLightbox;\n"],"names":["createElement","className","tagName","appendToEl","el","document","appendChild","toTransformString","x","y","scale","propValue","concat","undefined","setWidthHeight","w","h","style","width","height","LOAD_STATE","IDLE","LOADING","LOADED","ERROR","specialKeyUsed","e","button","ctrlKey","metaKey","altKey","shiftKey","getElementsFromOption","option","legacySelector","parent","arguments","length","elements","Element","NodeList","Array","isArray","from","selector","querySelectorAll","isPswpClass","fn","prototype","goTo","isSafari","navigator","vendor","match","PhotoSwipeEvent","constructor","type","details","defaultPrevented","Object","assign","preventDefault","Eventable","_listeners","_filters","pswp","options","addFilter","name","_this$_filters$name","_this$_filters$name2","_this$pswp","priority","push","sort","f1","f2","removeFilter","filter","applyFilters","_this$_filters$name3","_len","args","_key","forEach","apply","on","_this$_listeners$name","_this$pswp2","off","_this$pswp3","listener","dispatch","_this$_listeners$name2","event","call","Placeholder","imageSrc","container","element","imgEl","decoding","alt","src","setAttribute","setDisplayedSize","transformOrigin","transform","destroy","_this$element","parentNode","remove","Content","itemData","instance","index","data","placeholder","slide","displayedImageWidth","displayedImageHeight","Number","isAttached","hasSlide","isDecoding","state","content","removePlaceholder","keepPlaceholder","setTimeout","load","isLazy","reload","usePlaceholder","placeholderSrc","msrc","isFirstSlide","placeholderEl","parentElement","prepend","isImageContent","loadImage","innerHTML","html","updateContentSize","_this$data$src","_this$data$alt","imageElement","updateSrcsetSizes","srcset","complete","onLoaded","onload","onerror","onError","setSlide","isActive","heavyAppended","append","displayError","isError","isLoading","isInitialSizeUpdate","isZoomable","image","sizesWidth","dataset","largestUsedSize","parseInt","sizes","String","lazyLoad","_this$instance$option","_this$instance$option2","errorMsgEl","innerText","errorMsg","supportsDecode","decode","catch","finally","appendImage","activate","holderElement","deactivate","getViewportSize","getViewportSizeFn","newViewportSize","documentElement","clientWidth","window","innerHeight","parsePaddingOption","prop","viewportSize","paddingValue","paddingFn","padding","legacyPropName","toUpperCase","slice","getPanAreaSize","MAX_IMAGE_WIDTH","ZoomLevel","panAreaSize","elementSize","fit","fill","vFill","initial","secondary","max","min","update","maxWidth","maxHeight","hRatio","vRatio","Math","_getInitial","_getSecondary","_getMax","zoomLevels","slideData","_parseZoomLevelOption","optionPrefix","optionName","optionValue","currZoomLevel","lazyLoadData","createContentFromData","zoomLevel","ceil","lazyLoadSlide","getItemData","PhotoSwipeBase","getNumItems","_this$options","numItems","dataSource","items","_getGalleryDOMElements","gallery","_this$options2","dataSourceItem","_domElementToItemData","galleryElement","_this$options3","_this$options4","children","childSelector","linkEl","querySelector","pswpSrc","href","pswpSrcset","pswpWidth","pswpHeight","pswpType","thumbnailEl","_thumbnailEl$getAttri","currentSrc","getAttribute","pswpCropped","cropped","thumbCropped","PhotoSwipeLightbox","_uid","shouldOpen","_preloadedContent","onThumbnailsClick","bind","init","gallerySelector","addEventListener","initialPoint","clientX","clientY","clickedIndex","getClickedIndex","currentTarget","loadAndOpen","getClickedIndexFn","clickedTarget","target","childElements","clickedChildIndex","findIndex","child","contains","galleryElements","initialPointerPos","preload","promiseArray","pswpModuleType","pswpModule","Promise","resolve","Error","openPromise","preloadFirstSlide","uid","all","then","iterableModules","mainModule","_openPhotoswipe","module","default","keys","contentLoader","addToCache","removeEventListener"],"mappings":"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AACA;AACO,SAASC,QAAQA,GAAG;AACzB,EAAA,OAAO,CAAC,EAAEC,SAAS,CAACC,MAAM,IAAID,SAAS,CAACC,MAAM,CAACC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAA;AACjE;;ACvOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMC,eAAe,CAAC;AACpB;AACF;AACA;AACA;AACEC,EAAA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"}