<!-- Equipamentos_Titulo -->
<link href="./{tpldir}/css/estilos.css" rel="stylesheet" type="text/css" />
<h2>{Equipamentos_Titulo}</h2>

<!-- Equipamentos_SubTitulo -->
<h3><u>Instalador</u>: {Equipamentos_SubTitulo_Id} - {Equipamentos_SubTitulo_Nome}</h3>

<!-- Equipamentos_Acao -->
<script type="text/javascript"><!--

function acao(com,grid)
{

	switch(com){

		case "Editar":
			if($('.trSelected',grid).length>0){
		    	var items = $('.trSelected',grid);
		    	var id = items[0].cells[0].children[0].innerHTML;
		       	$.post("includes/incAcao.php",
		       		{
						acao: "CADASTRO_EDITAR",
						tipo: 7,
		           		id: id
					},
					function(data){
						$('#conteudo').html(data);
					});
			}				
			break;

	}
		
}

</script>

<!-- Equipamentos_Formulario -->
<script type="text/javascript" src="{tpldir}/js/ui/ui.draggable.js"></script>
<script type="text/javascript" src="{tpldir}/js/ui/ui.resizable.js"></script>
<script type="text/javascript" src="{tpldir}/js/ui/ui.dialog.js"></script>
<script type="text/javascript" src="js/external/bgiframe/jquery.bgiframe.js"></script>
<script type="text/javascript">
	function msg(id,msg){
		
		$(".ui-dialog-title").html("");
		
		switch(id){
			case 'erro': $("#aviso").attr("title","Erro");
						 $(".ui-dialog-title").html("Erro");
						 var img = '<span class="ui-icon ui-icon-alert"'+
						 'style="float:left; margin:0 7px 20px 0;"></span>';
						 break;
			case 'sucesso': $("#aviso").attr("title","Sucesso");
							$(".ui-dialog-title").html("Sucesso");
							var img = '<span class="ui-icon ui-icon-circle-check"'+
							 'style="float:left; margin:0 7px 20px 0;"></span>';
							break;
		}
		
		$(".msg").html(img+msg);
		
		$("#aviso").dialog('open');
		
		$("#aviso").dialog({
			bgiframe: true,
			resizable: false,
			autoOpen: false,
			height:210,
			modal: true,
			overlay: {
				backgroundColor: '#000',
				opacity: 0.5
			},
			buttons: {
				OK: function() {
					$(this).dialog('close');
				}
			}
		});
	}

	function retorno(data){ 
		
		switch(data){
			case "ok":
				msg("sucesso","Estoque EDITADO com sucesso!");
			break; 	
			
			default:
				msg("erro","Os dados NÃO foram alterados ainda. Por favor TENTE NOVAMENTE!");
			break; 					
		}
		
		if (data != ""){
			$.get('includes/Cadastros/incCadastrosEquipamentosInstaladorLista.php', function(data) {		    	
		        $('#conteudo').html(data);
		    });
		}
	}  
	
	$(document).ready( function() {
		
		msg("","");

		$.ui.dialog.defaults.bgiframe = true;
		
		$('#btEnviar').css("cursor","pointer").click(function() {
			
			var a = "";
			var r = "";
			$('#cad').find("input[type='checkbox'], input[type='radio']").each(function(){
				if ($(this).is(":checked")) {
					if(this.name == "adicionar") a += this.value + ",";
					if(this.name == "remover") r += this.value + ",";
				}
			});
			
			if(a!="") a = substr(a,0,-1); // retira a ultima virgula
			if(r!="") r = substr(r,0,-1); // retira a ultima virgula

			if(a=="" && r=="") alert("Escolha pelo menos UM modulo para adicionar/remover.");			
			else {
				
				// Se nao houverem erros, enviar os dados
				var params = { 
						acao  	  : "CADASTRO_EQUIPAMENTOS_INSTALADOR",
						id 		  : $('#id').val(),
						adicionar : a,
						remover   : r
					};
				
				$.post("includes/incAcao.php", params,
					function(data){
						retorno(data);
					}
				);
			}
		})
		.hover(
			function(){ 
				$(this).addClass("ui-state-hover"); 
			},
			function(){ 
				$(this).removeClass("ui-state-hover"); 
			}
		).mousedown(function(){
			$(this).addClass("ui-state-active"); 
		})
		.mouseup(function(){
				$(this).removeClass("ui-state-active");
		});
	});
</script>
<p>
	Favor preencher corretamente o formulário abaixo.
</p>
<table id="cad" width="550" border="0" cellpadding="5" cellspacing="1" bgcolor="#C9C9C9">
  <tr bgcolor="#F3F3F3">
    <td align="center" width="50%">REMOVER M&Oacute;DULO</td>
    <td align="center">ADICIONAR M&Oacute;DULO</td>
  </tr>
  <tr bgcolor="#FFFFFF">
    <td align="center" valign="top">
<!-- Equipamentos_Formulario_Continuacao_Remover -->   
    </td>
    <td align="center" valign="top">
<!-- Equipamentos_Formulario_Continuacao_Adicionar -->   
    </td>
  </tr> 
  <tr bgcolor="#FFFFFF">
    <td colspan="2" align="center">
    	&nbsp;
    	<input type="hidden" name="id" id="id" value="{id}" />
    	<button id="btEnviar" class="ui-button ui-state-default ui-corner-all">ENVIAR</button>
    </td>
  </tr>
</table>

<div id="aviso">
	<p class="msg"></p>
</div>
