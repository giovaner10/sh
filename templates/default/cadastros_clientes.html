<!-- Clientes_Titulo -->
<link href="./{tpldir}/css/estilos.css" rel="stylesheet" type="text/css" />
<h2>{Clientes_Titulo}</h2>

<!-- Clientes_SubTitulo -->
<h3><u>Cliente</u>: {Clientes_SubTitulo_Id} - {Clientes_SubTitulo_Nome}</h3>

<!-- Clientes_Acao -->
<script type="text/javascript">

function acao(com,grid)
{

	switch(com){
            
            
		case "Cadastrar Veiculos":
	       	$.post("includes/Cadastros/incCadastrosVeiculosAbas.php",
	       		{
		       		acao: "CADASTRO_VEICULOS_ABAS",
				abaId:"dados",
	           		tipo: 1,
	           		id: ""
				},
				function(data){
					$('#conteudo').html(data);
				});
			break;

		case "Nova":


			       	$.post("includes/incAcao.php",
			       		{
				       		acao: "CADASTRO_CLIENTE_ABAS",
						abaId:"proposta",
			           		//tipo: 1,
			           		id: ''
						},
						function(data){
                                                    //$('#conteudo').html(data);
							$('#propostas').html(data);
						});

               
			break;

                                
		case "Alterar":
                    
			if($('.trSelected',grid).length>0){
		    	var items = $('.trSelected',grid);
		    	var id = items[0].cells[0].children[0].innerHTML;
                        
		       	$.post("includes/incAcao.php",
		       		{
			       		acao: "CADASTRO_CLIENTE_ABAS",
					abaId:"proposta",
		           		tipo: 1,
		           		id: id
					},
					function(data){
						$('#propostas').html(data);
					});
			}				
			break;
                        
		case "Imprimir":
			if($('.trSelected',grid).length>0){
		    	var items = $('.trSelected',grid);
		    	var id = items[0].cells[0].children[0].innerHTML;
                        
		       	$.post("includes/incAcao.php",
		       		{
			       		acao: "PROPOSTA_EMAIL",
		           		id: id
					},
					function(data){
						$('#conteudo').html(data);
					});
			}				
			break;
                        
                        case "Anexos":
			$.post("includes/incAcao.php",
		       		{
			       		acao: "ARQUIVO_PROPOSTAS",
		           		id: id
					},
					function(data){
						$('#propostas').html(data);
					});
							
			break;                        

                        


		case "Cadastrar":
	       	$.post("includes/Cadastros/incCadastrosClientesAbas.php",
	       		{
	           		acao: "CADASTRO_CLIENTE_ABAS",
					abaId:"dados",
	           		tipo: 1,
	           		id: ""
				},
				function(data){
					$('#conteudo').html(data);
				});
			break;

		case "Editar":
				if($('.trSelected',grid).length>0){
			    	var items = $('.trSelected',grid);
			    	var id = items[0].cells[0].children[0].innerHTML;
			       	$.post("includes/Cadastros/incCadastrosClientesAbas.php",
			       		{
				       		acao: "CADASTRO_CLIENTE_ABAS",
							abaId:"dados",
			           		tipo: 1,
			           		id: id
						},
						function(data){
							$('#conteudo').html(data);
						});
				}				
				break;

		case "Bloquear":
				if($('.trSelected',grid).length>0){
			    	var items = $('.trSelected',grid);
			    	var id = items[0].cells[0].children[0].innerHTML;
			    	var nome = items[0].cells[1].children[0].innerHTML;
			       	$.post("includes/incAcao.php",
			       		{
							acao: "CADASTRO_BLOQUEAR",
							tipo: 1,
			           		id: id,
			           		nome: nome,
			           		status: 0
						},
						function(data){
							if (data == "ok"){
								alert("Bloqueio realizado com sucesso!!");
								$.get('includes/Cadastros/incCadastrosClientesLista.php', function(data) {		    	
							        $('#conteudo').html(data);
							    });
							}
							else{
								alert("NÃO foi possível realizar o Bloqueio.\nPor favor tente novamente.");
							}
						});
				}				
				break;

		case "Desbloquear":
			if($('.trSelected',grid).length>0){
		    	var items = $('.trSelected',grid);
		    	var id = items[0].cells[0].children[0].innerHTML;
		    	var nome = items[0].cells[1].children[0].innerHTML;
		       	$.post("includes/incAcao.php",
		       		{
						acao: "CADASTRO_DESBLOQUEAR",
						tipo: 1,
		           		id: id,
		           		nome: nome,
		           		status: 1
					},
					function(data){
						if (data == "ok"){
							alert("DESBloqueio realizado com sucesso!!");
							$.get('includes/Cadastros/incCadastrosClientesLista.php', function(data) {		    	
						        $('#conteudo').html(data);
						    });
						}
						else{
							alert("NÃO foi possível realizar o DESBloqueio.\nPor favor tente novamente.");
						}
					});
			}				
			break;						
	}
		
}
</script>

<!-- Clientes_Formulario_Cadastro_INICIO -->
<script type="text/javascript" src="{tpldir}/js/ui/ui.draggable.js"></script>
<script type="text/javascript" src="{tpldir}/js/ui/ui.resizable.js"></script>
<script type="text/javascript" src="{tpldir}/js/ui/ui.dialog.js"></script>
<script type="text/javascript" src="js/external/bgiframe/jquery.bgiframe.js"></script>
<script type="text/javascript" src="{tpldir}/js/maskedinput/maskedinput-1.3.js"></script>
<script type="text/javascript">
	function msg(id,msg){
		
		$(".ui-dialog-title").html("");
		
		switch(id){
			case 'erro': $("#aviso").attr("title","Erro");
						 $(".ui-dialog-title").html("Erro");
						 var img = '<span class="ui-icon ui-icon-alert"'+
						 'style="float:left; margin:0 7px 20px 0;"></span>';
						 break;
			case 'sucesso': $("#aviso").attr("title","Sucesso");
							$(".ui-dialog-title").html("Sucesso");
							var img = '<span class="ui-icon ui-icon-circle-check"'+
							 'style="float:left; margin:0 7px 20px 0;"></span>';
							break;
		}
		
		$(".msg").html(img+msg);
		
		$("#aviso").dialog('open');
		
		$("#aviso").dialog({
			bgiframe: true,
			resizable: false,
			autoOpen: false,
			height:210,
			modal: true,
			overlay: {
				backgroundColor: '#000',
				opacity: 0.5
			},
			buttons: {
				OK: function() {
					$(this).dialog('close');
				}
			}
		});
	}

	function retorno(data){ 
		
		switch(data){
			case "cadastrado":
				msg("sucesso","Cliente CADASTRADO(A) com sucesso!");
			break; 
			
			case "editado":
				msg("sucesso","Cliente EDITADO(A) com sucesso!");
			break; 	
			
			default:
				msg("erro","Os dados NÃO foram alterados ainda. Por favor TENTE NOVAMENTE!");
			break; 					
		}
		
		if (data != ""){
			
			$.get('includes/Cadastros/incCadastrosClientesLista.php', function(data) {		    	
		        $('#conteudo').html(data);
		    });
		}
	}  
	
	$(document).ready( function() {
		
		var pj_ini = "{pj_checked}";
		
		if (pj_ini == "") {
			$("#dados_pf").attr("style","display:''");
		}
		else{
			$("#dados_pj").attr("style","display:''");
		}
		
		$("#pj").click(function(){
			$("#dados_pf").attr("style","display:none");
			$("#dados_pj").attr("style","display:''");
		});
		
		$("#pf").click(function(){
			$("#dados_pj").attr("style","display:none");
			$("#dados_pf").attr("style","display:''");
		});		
		
		$("#fone").mask("(99) 9999-9999");
		$("#cel").mask("(99) 9999-9999");
		$("#fax").mask("(99) 9999-9999");
		$("#cep").mask("99999-999");
		$("#cpf").mask("999.999.999-99");
		$("#cnpj").mask("99.999.999/9999-99");

		msg("","");

		$.ui.dialog.defaults.bgiframe = true;
		
		$('#btEnviar').css("cursor","pointer").click(function() {

			// Fazendo as verificacoes
			var mens1 = "";
                        
			if ($("#nome").val() == "" || $("#nome").val() == " ") mens1 += "<li>Nome</li>";

			if (mens1 != ""){
				// Definindo as mensagens de erro
				var mens = "Campos obrigatórios em branco:<br><ul>";
				mens += mens1 + "</ul>";
				msg("erro",mens);
			}
			else {
				// Se nao houverem erros, enviar os dados
				var params = { 
						acao  : "CADASTRO_ENVIAR",
						tipo: 1,
						id    : $('#id').val(),
						oper  : "{oper}"
					};
				
				$('#cad').find("input[type='text'], input[type='hidden'],"+
						 "input[type='password'], input[type='submit'], option:selected,"+
						 "textarea").filter(":enabled").each(function(){
						 	params[ this.name || this.id || this.parentNode.name || this.parentNode.id ] = this.value;
						 });
		
				$('#cad').find("input[type='checkbox'], input[type='radio']").each(function(){
					if ($(this).is(":checked")) {
						params[ this.name ] = this.value;
					}
				});
				
				params[ 'tipo' ] = 1;
				
				$.post("includes/incAcao.php", params,
					function(data){
						retorno(data);
					}
				);
			}
		})
		.hover(
			function(){ 
				$(this).addClass("ui-state-hover"); 
			},
			function(){ 
				$(this).removeClass("ui-state-hover"); 
			}
		).mousedown(function(){
			$(this).addClass("ui-state-active"); 
		})
		.mouseup(function(){
				$(this).removeClass("ui-state-active");
		});
	});
        
//		  <tr>
//		    <td width="100" align="right">Nome</td>
//		    <td><input type="text" name="nome" id="nome" value="{nome}" size="30" class="forms" /></td>
//		  </tr>
        
</script>
<p>
	Favor preencher corretamente o formulário abaixo.
</p>
<table id="cad" width="500" border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" align="right">Tipo</td>
    <td>
    	<input type="radio" name="tipo" id="pj" value="pj" {pj_checked}/> Pessoa Jurídica &nbsp;&nbsp;
    </td>
  <td>
    	<input type="radio" name="tipo" id="pf" value="pf" {pf_checked}/> Pessoa Física<br>
    </td>
  </tr>
  <tr>
      
		    <td width="100" align="right">Nome</td>
		    <td><input type="text" name="nome" id="nome" value="{nome}" size="30" class="forms" /></td>
      
    <td colspan="2">



		<table id="dados_pj" width="100%" border="0" cellpadding="5" cellspacing="0" style="display:{pj_display}"> 
		  <tr>
		    <td align="right">CNPJ</td>
		    <td><input type="text" name="cnpj" id="cnpj" value="{cnpj}" size="20" class="forms" /></td>
		  </tr> 
		  <tr>
		    <td align="right">Inscrição Estadual</td>
		    <td><input type="text" name="inscricao_estadual" id="inscricao_estadual" value="{inscricao_estadual}" size="20" class="forms" /></td>
		  </tr>		  		
		  <tr>
		    <td width="100" align="right">Razão Social</td>
		    <td><input type="text" name="razao_social" id="razao_social" value="{razao_social}" size="30" class="forms" /></td>
		  </tr>		 

                  
                  <tr>
		    <td width="100" align="right">Contato</td>
		    <td><input type="text" name="contato" id="contato" value="{contato}" size="30" class="forms" /></td>
		  </tr>		  
		</table>
		
      		<table id="dados_pf" width="100%" border="0" cellpadding="5" cellspacing="0" style="display:{pf_display};">  

                    
                  <tr>
		    <td align="right">CPF</td>
		    <td><input type="text" name="cpf" id="cpf" value="{cpf}" size="14" class="forms" /></td>
		  </tr> 
		</table>		

	</td>
  </tr>
  
  <tr>
      <td  width="100" align="right">
   	Status
      </td>
      <td>
<!-- Cliente_Formulario_Status -->      	
      </td>
  </tr>

    <tr>
    <td width="100" align="right">Vendedor</td>
    <td>
    
<!-- Contratos_Formulario_Continuacao_Vendedor -->
	</td>
  </tr>  
  
  <tr>
    <td align="right">Endereço</td>
    <td>
    	<input type="text" name="endereco" id="endereco" value="{endereco}" size="30" class="forms" />
    	Número <input type="text" name="numero" id="numero" value="{numero}" size="5" class="forms" />
    </td>
  </tr>
  <tr>
    <td align="right">Complemento</td>
    <td><input type="text" name="complemento" id="complemento" value="{complemento}" size="30" class="forms" /></td>
  </tr>
  <tr>
    <td align="right">Bairro</td>
    <td><input type="text" name="bairro" id="bairro" value="{bairro}" size="30" class="forms" /></td>
  </tr> 
   <tr>
    <td align="right">Cidade</td>
    <td>
    	<input type="text" name="cidade" id="cidade" value="{cidade}" size="30" class="forms" /></td>
  </tr> 
   <tr>
    <td align="right">Estado</td>
    <td>

<!-- Clientes_Formulario_Cadastro_UF_FIM -->      	
    </td>
  </tr> 
<!-- Clientes_Formulario_Cadastro_FIM -->    
   <tr>
    <td align="right">CEP</td>
    <td><input type="text" name="cep" id="cep" value="{cep}" size="10" class="forms" /></td>
  </tr>  
  <tr>
    <td align="right">Ponto de referência</td>
    <td><input type="text" name="ponto_de_referencia" id="ponto_de_referencia" value="{ponto_de_referencia}" size="30" class="forms" /></td>
  </tr>    
   <tr>
    <td align="right">Telefone Fixo</td>
    <td><input type="text" name="fone" id="fone" value="{fone}" size="14" class="forms" /></td>
  </tr> 
   <tr>
    <td align="right">Telefone Celular</td>
    <td><input type="text" name="cel" id="cel" value="{cel}" size="14" class="forms" /></td>
  </tr>
  <tr>
    <td align="right">Fax</td>
    <td><input type="text" name="fax" id="fax" value="{fax}" size="14" class="forms" /></td>
  </tr> 
  <tr>
  <td></td>
  <td colspan="2">Para mais de um email no mesmo campo separar por ; ex: email@xxx.com;email2@xxx.com</td>
  </tr>
   <tr>
   <td align="right" valign="bottom"><p>Setor</p><p>E-mail 1</p></td>
    <td><input type="text" name="demail1" id="demail1" value="{demail1}" size="30" class="forms" disabled />
        <input type="text" name="email" id="email" value="{email}" size="30" class="forms" /></td>
  </tr> 

     <tr>
     <td align="right" valign="bottom"><p>Setor</p><p>E-mail 2</p></td>
    <td><input type="text" name="demail2" id="demail2" value="{demail2}" size="30" class="forms" disabled />
        <input type="text" name="email2" id="email2" value="{email2}" size="30" class="forms" /></td>
  </tr> 

   <tr>
   <td align="right" valign="bottom"><p>Setor</p><p>E-mail 3</p></td>
    <td><input type="text" name="demail3" id="demail3" value="{demail3}" size="30" class="forms" disabled />
        <input type="text" name="email3" id="email3" value="{email3}" size="30" class="forms" /></td>
  </tr> 

   <tr>
   <td align="right" valign="bottom"><p>Setor</p><p>E-mail 4</p></td>
    <td><input type="text" name="demail4" id="demail4" value="{demail4}" size="30" class="forms" />
        <input type="text" name="email4" id="email4" value="{email4}" size="30" class="forms" /></td>
  </tr> 
  
   <tr>
   <td align="right" valign="bottom"><p>Setor</p><p>E-mail 5</p></td>
    <td><input type="text" name="demail5" id="demail5" value="{demail5}" size="30" class="forms" />
        <input type="text" name="email5" id="email5" value="{email5}" size="30" class="forms" /></td>
  </tr> 
  
  
   <tr>
    <td align="right" valign="top">Informações</td>
    <td>
    	<textarea name="informacoes" id="informacoes" rows="5" cols="25">{informacoes}</textarea>
  </tr>
  <tr>
    <td align="right">Latitude</td>
    <td><input type="text" name="latitude" id="latitude" value="{latitude}" size="20" class="forms" /></td>
  </tr>
  <tr>
    <td align="right">Longitude</td>
    <td><input type="text" name="longitude" id="longitude" value="{longitude}" size="20" class="forms" /></td>
  </tr>
  <tr>
    <td align="right">
    	&nbsp;
    	<input type="hidden" name="id" id="id" value="{id}" />
    </td>
    <td><button id="btEnviar" class="ui-button ui-state-default ui-corner-all">ENVIAR</button></td>
  </tr>
</table>

<div id="aviso">
	<p class="msg"></p>
</div>

<!-- Abas -->
<script type="text/javascript">

var loader = "<p align='center'><img src='{tpldir}/img/ajax-loader.gif'><br>Carregando...</p>";

$(function() {
	$("#{Abas_Id}").tabs();
});

function mostraFormulario(abaId,id) {
	$("#" + abaId).html(loader);
	$.ajax({  
		type: "GET",  
		url: "includes/incAcao.php?acao=CADASTRO_CLIENTE_ABAS&abaId="+abaId+"&id="+id,
		success: function(data) {  
			$("#" + abaId).html(data)
		}  
	});	
}

</script>

<!-- Abas_Cabecalho -->
<div id="{Abas_Id}" style="width:100%;">
	<ul class="abas">

<!-- Abas_Cabecalho_LI -->
		<li><a href="#{Abas_Titulo_Id}" onClick="mostraFormulario('{Abas_Titulo_Id}','{Abas_id}');">{Abas_Titulos}</a></li>

<!-- Abas_Cabecalho_Fim -->
	</ul>

<!-- Abas_Conteudo_DIV -->
	<div id="{Abas_Conteudo_Id}"></div>
	
<!-- Abas_Conteudo -->
	<script type="text/javascript">
		$(function() {
			$("#{Abas_Conteudo_Id}").html(loader);
			$.ajax({  
				type: "GET",  
				url: "includes/incAcao.php?acao=CADASTRO_CLIENTE_ABAS&abaId=dados&id={id}",
				success: function(data) {  
					$("#{Abas_Conteudo_Id}").html(data)
				}  
			});
		});
	</script>	
		
<!-- Abas_Fim -->
</div>

<!-- Titulo_Abas_Conteudo -->
 {Titulo_Abas_Conteudo}
 